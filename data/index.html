<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node IoT Configuration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0px;
            margin-right: 30px;
            margin-left: 30px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #00101c;
            color: white;
            padding: 10px 20px;
            width: 100%;
            margin-left: 20px;
        }
        .header h1 {
            margin: 0;
        }
        .tabs {
            display: flex;
            margin-top: 20px;
            border-bottom: 2px solid #ddd;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid #ddd;
            border-bottom: none;
            background-color: #f9f9f9;
        }
        .tab.active {
            background-color: white;
            font-weight: bold;
            border-top: 4px solid #00101c;
        }
        .tab-content {
            display: none;
            margin-top: 20px;
        }
        .tab-content.active {
            display: block;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        button {
            padding: 5px 10px;
            background-color: #f44336;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #d32f2f;
        }
        .border, .border-vplab-dark{
        border-color: #8a603d!important;
        }
        .text-vplab-light{
        color: black;
        }
        .text-vplab-light01{
        color: #32C5FF!important;
        font-size: 1.5rem;
        }
        .text-vplab-red{
        color: rgb(196, 37, 52) !important;
        }
        .text-vplab-green{
        color: rgb(0, 159, 72) !important;
        }
        .vplab_light_blue_bg, .bg-vplab-light{
        background-color: #fa6d30!important;
        }
        .vplab-light-blue-border, .border-vplab-light{
        border-color: #000000!important;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 220px;
            background: #00101c;
            color: #fff;
            z-index: 100;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s;
            box-shadow: 2px 0 8px rgba(0,0,0,0.08);
        }
        .sidebar.hide {
            transform: translateX(-100%);
        }
        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 18px 8px 18px;
            font-size: 1.2em;
            font-weight: bold;
            background: #00101c;
        }
        .sidebar-toggle {
            background: none;
            border: none;
            color: #fff;
            font-size: 22px;
            cursor: pointer;
            margin-left: 10px;
        }
        .sidebar-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
            margin-top: 10px;
        }
        .sidebar-link {
            padding: 14px 24px;
            color: #fff;
            text-align: left;
            border: none;
            background: none;
            font-size: 1em;
            cursor: pointer;
            border-left: 4px solid transparent;
            transition: background 0.15s, border-color 0.15s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .sidebar-link.active, .sidebar-link:hover {
            background: #17324a;
            border-left: 4px solid #2196F3;
            color: #32C5FF;
        }
        .sidebar-spacer {
            flex: 1;
        }
        @media (max-width: 900px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.show {
                transform: translateX(0);
            }
            .sidebar-toggle-main {
                display: inline-flex !important;
            }
            body.sidebar-open {
                overflow: hidden;
            }
            
            body {
                padding-left: 0 !important;
            }
            .header {
                margin-left: -20px  !important;
            }
            .hide-on-mobile {
                display: none !important;
            }
            .header-logo-container {
                margin-left: 150px;
            }
        }
        @media (min-width: 901px) {
            .sidebar-toggle-main {
                display: none !important;
            }
            .sidebar {
                transform: translateX(0) !important;
            }
            
            body {
                padding-left: 200px !important;
            }
            .header {
                margin-left: -10px !important;
            }
        }
        
        .file-subtab.active {
            background: #fff;
            font-weight: bold;
            border-top: 4px solid #2196F3;
        }
        .file-subtab {
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        

        <symbol id="home" viewBox="0 0 16 16">
        <path
            d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z" />
        </symbol>
        <symbol id="speedometer2" viewBox="0 0 16 16">
        <path
            d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z" />
        <path fill-rule="evenodd"
            d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z" />
        </symbol>
        <symbol id="table" viewBox="0 0 16 16">
        <path
            d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z" />
        </symbol>
        <symbol id="people-circle" viewBox="0 0 16 16">
        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
        <path fill-rule="evenodd"
            d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
        </symbol>
        <symbol id="grid" viewBox="0 0 16 16">
        <path
            d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z" />
        </symbol>
        <symbol id="collection" viewBox="0 0 16 16">
        <path
            d="M2.5 3.5a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-11zm2-2a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1h-7zM0 13a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V6a1.5 1.5 0 0 0-1.5-1.5h-13A1.5 1.5 0 0 0 0 6v7zm1.5.5A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-13z" />
        </symbol>
        <symbol id="calendar3" viewBox="0 0 16 16">
        <path
            d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z" />
        <path
            d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
        </symbol>
        <symbol id="chat-quote-fill" viewBox="0 0 16 16">
        <path
            d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM7.194 6.766a1.688 1.688 0 0 0-.227-.272 1.467 1.467 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 5.734 6C4.776 6 4 6.746 4 7.667c0 .92.776 1.666 1.734 1.666.343 0 .662-.095.931-.26-.137.389-.39.804-.81 1.22a.405.405 0 0 0 .011.59c.173.16.447.155.614-.01 1.334-1.329 1.37-2.758.941-3.706a2.461 2.461 0 0 0-.227-.4zM11 9.073c-.136.389-.39.804-.81 1.22a.405.405 0 0 0 .012.59c.172.16.446.155.613-.01 1.334-1.329 1.37-2.758.942-3.706a2.466 2.466 0 0 0-.228-.4 1.686 1.686 0 0 0-.227-.273 1.466 1.466 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 10.07 6c-.957 0-1.734.746-1.734 1.667 0 .92.777 1.666 1.734 1.666.343 0 .662-.095.931-.26z" />
        </symbol>
        <symbol id="cpu-fill" viewBox="0 0 16 16">
        <path d="M6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z" />
        <path
            d="M5.5.5a.5.5 0 0 0-1 0V2A2.5 2.5 0 0 0 2 4.5H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2v1H.5a.5.5 0 0 0 0 1H2A2.5 2.5 0 0 0 4.5 14v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14h1v1.5a.5.5 0 0 0 1 0V14a2.5 2.5 0 0 0 2.5-2.5h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14v-1h1.5a.5.5 0 0 0 0-1H14A2.5 2.5 0 0 0 11.5 2V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5a.5.5 0 0 0-1 0V2h-1V.5zm1 4.5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3A1.5 1.5 0 0 1 6.5 5z" />
        </symbol>
        <symbol id="gear-fill" viewBox="0 0 16 16">
        <path
            d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z" />
        </symbol>
        <symbol id="speedometer" viewBox="0 0 16 16">
        <path
            d="M8 2a.5.5 0 0 1 .5.5V4a.5.5 0 0 1-1 0V2.5A.5.5 0 0 1 8 2zM3.732 3.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 8a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 7.31A.91.91 0 1 0 8.85 8.569l3.434-4.297a.389.389 0 0 0-.029-.518z" />
        <path fill-rule="evenodd"
            d="M6.664 15.889A8 8 0 1 1 9.336.11a8 8 0 0 1-2.672 15.78zm-4.665-4.283A11.945 11.945 0 0 1 8 10c2.186 0 4.236.585 6.001 1.606a7 7 0 1 0-12.002 0z" />
        </symbol>
        <symbol id="toggles2" viewBox="0 0 16 16">
        <path d="M9.465 10H12a2 2 0 1 1 0 4H9.465c.34-.588.535-1.271.535-2 0-.729-.195-1.412-.535-2z" />
        <path
            d="M6 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm0 1a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm.535-10a3.975 3.975 0 0 1-.409-1H4a1 1 0 0 1 0-2h2.126c.091-.355.23-.69.41-1H4a2 2 0 1 0 0 4h2.535z" />
        <path d="M14 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" />
        </symbol>
        <symbol id="tools" viewBox="0 0 16 16">
        <path
            d="M1 0L0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.356 3.356a1 1 0 0 0 1.414 0l1.586-1.586a1 1 0 0 0 0-1.414l-3.356-3.356a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0zm9.646 10.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708zM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11z" />
        </symbol>
        <symbol id="chevron-right" viewBox="0 0 16 16">
        <path fill-rule="evenodd"
            d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
        </symbol>
        <symbol id="geo-fill" viewBox="0 0 16 16">
        <path fill-rule="evenodd"
            d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z" />
        </symbol>
        <symbol id="mainboard_icon" viewBox="0 0 16 16">
            <path d="M11.5 2a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5m2 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5m-10 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zM5 3a1 1 0 0 0-1 1h-.5a.5.5 0 0 0 0 1H4v1h-.5a.5.5 0 0 0 0 1H4a1 1 0 0 0 1 1v.5a.5.5 0 0 0 1 0V8h1v.5a.5.5 0 0 0 1 0V8a1 1 0 0 0 1-1h.5a.5.5 0 0 0 0-1H9V5h.5a.5.5 0 0 0 0-1H9a1 1 0 0 0-1-1v-.5a.5.5 0 0 0-1 0V3H6v-.5a.5.5 0 0 0-1 0zm0 1h3v3H5zm6.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
            <path d="M1 2a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-2H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 9H1V8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6H1V5H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 2zm1 11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1z"/>
        </symbol>
        <symbol id="broadcast_icon" viewBox="0 0 16 16">
            <path d="M3.05 3.05a7 7 0 0 0 0 9.9.5.5 0 0 1-.707.707 8 8 0 0 1 0-11.314.5.5 0 0 1 .707.707m2.122 2.122a4 4 0 0 0 0 5.656.5.5 0 1 1-.708.708 5 5 0 0 1 0-7.072.5.5 0 0 1 .708.708m5.656-.708a.5.5 0 0 1 .708 0 5 5 0 0 1 0 7.072.5.5 0 1 1-.708-.708 4 4 0 0 0 0-5.656.5.5 0 0 1 0-.708m2.122-2.12a.5.5 0 0 1 .707 0 8 8 0 0 1 0 11.313.5.5 0 0 1-.707-.707 7 7 0 0 0 0-9.9.5.5 0 0 1 0-.707zM6 8a2 2 0 1 1 2.5 1.937V15.5a.5.5 0 0 1-1 0V9.937A2 2 0 0 1 6 8"/>
        </symbol>
        <symbol id="wifi_icon" viewBox="0 0 16 16">
            <path d="M15.384 6.115a.485.485 0 0 0-.047-.736A12.444 12.444 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.716 2.164.205.148.49.13.668-.049z"/>
            <path d="M13.229 8.271a.482.482 0 0 0-.063-.745A9.455 9.455 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.576 1.336c.206.132.48.108.653-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.473 6.473 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.407.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.61-.091zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .707 0l.707-.707z"/>
        </symbol>
        <symbol id="earmark" viewBox="0 0 16 16">
            <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M6.854 7.146 8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 1 1 .708-.708"/>
        </symbol>
        <symbol id="home_icon" viewBox="0 0 16 16">
            <path d="M0 4s0-2 2-2h12s2 0 2 2v6s0 2-2 2h-4c0 .667.083 1.167.25 1.5H11a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1h.75c.167-.333.25-.833.25-1.5H2s-2 0-2-2zm1.398-.855a.758.758 0 0 0-.254.302A1.46 1.46 0 0 0 1 4.01V10c0 .325.078.502.145.602.07.105.17.188.302.254a1.464 1.464 0 0 0 .538.143L2.01 11H14c.325 0 .502-.078.602-.145a.758.758 0 0 0 .254-.302 1.464 1.464 0 0 0 .143-.538L15 9.99V4c0-.325-.078-.502-.145-.602a.757.757 0 0 0-.302-.254A1.46 1.46 0 0 0 13.99 3H2c-.325 0-.502.078-.602.145z"/>
            </symbol>
        <symbol id="gear_fill_icon" viewBox="0 0 16 16">
            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"></path>
        </symbol>
        <symbol id="info_icon" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
        </symbol>
        <symbol id="console_icon" viewBox="0 0 16 16">
            <path d="M6 9a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3A.5.5 0 0 1 6 9zM3.854 4.146a.5.5 0 1 0-.708.708L4.793 6.5 3.146 8.146a.5.5 0 1 0 .708.708l2-2a.5.5 0 0 0 0-.708l-2-2z"/>
            <path d="M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h12z"/>
        </symbol>
        <symbol id="pause_icon" viewBox="0 0 16 16">
            <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>
        </symbol>
        <symbol id="stop_icon" viewBox="0 0 16 16">
            <path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"/>
        </symbol>
        <symbol id="speed_icon" viewBox="0 0 16 16">
            <path d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
            <path fill-rule="evenodd" d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z"/>
        </symbol>     
        <symbol id="reload_icon" viewBox="0 0 16 16">
            <path d="M 6.1479 14.3856 c -1.0814 -0.2552 -2.3207 -0.972 -3.159 -1.8103 c -0.7898 -0.7898 -1.5309 -2.0169 -1.5309 -2.5272 c 0 -0.4981 0.4981 -0.9842 1.0085 -0.9842 c 0.5346 0 0.729 0.158 1.0814 0.8748 c 0.3766 0.7898 1.4094 1.7982 2.2478 2.1749 c 1.3608 0.6318 3.2926 0.5103 4.532 -0.2673 c 0.8748 -0.5589 0.8748 -0.5711 -0.1944 -1.6524 l -0.9598 -0.9598 l 2.7094 0 l 2.6973 0 l 0 2.6973 l 0 2.7094 l -0.9963 -0.9963 l -1.0085 -0.9842 l -0.5468 0.4253 c -1.6646 1.3001 -3.8637 1.7861 -5.8806 1.3001 z M 12.6603 6.4152 c -0.1458 -0.0729 -0.4495 -0.4617 -0.6561 -0.8505 c -0.4617 -0.8748 -1.3487 -1.7131 -2.2599 -2.1384 c -0.6075 -0.2916 -0.8384 -0.3281 -1.9683 -0.3281 c -1.1421 0 -1.3487 0.0365 -2.0291 0.3523 c -0.4131 0.1822 -0.8748 0.4738 -1.0206 0.6318 l -0.2795 0.3038 l 0.9598 0.9598 l 0.972 0.972 l -2.7094 0 l -2.6973 0 l 0 -2.6973 l 0 -2.7094 l 1.0085 0.9963 l 0.9963 1.0085 l 0.5468 -0.4374 c 2.7216 -2.1749 6.5853 -1.9562 9.0396 0.4981 c 0.8141 0.8141 1.5309 2.0291 1.5309 2.5636 c -0.0121 0.401 -0.1822 0.6804 -0.5711 0.8748 c -0.3159 0.1701 -0.4981 0.1701 -0.8627 0 z"/>
        </symbol>
        <symbol id="sd_card_icon" viewBox="0 0 16 16">
            <path d="M 1.5149 2.9412 V 15.7554 C 1.5149 15.9764 1.694 16.1554 1.9149 16.1554 H 14.2405 C 14.4614 16.1554 14.6405 15.9764 14.6405 15.7554 V 6.9673 C 14.6405 6.7463 14.4614 6.5673 14.2405 6.5673 H 13.6855 V 5.4289 H 14.2405 C 14.4614 5.4289 14.6405 5.2498 14.6405 5.0289 V 0.4 C 14.6405 0.179 14.4614 0 14.2405 0 H 4.456 C 4.3499 0 4.2482 0.0421 4.1731 0.1172 L 1.6321 2.6583 C 1.557 2.7334 1.5149 2.835 1.5149 2.9412 Z M 12.5034 9.2914 V 13.0213 C 12.5034 13.4707 12.1391 13.835 11.6897 13.835 H 4.4656 C 4.0162 13.835 3.6518 13.4707 3.6518 13.0213 V 9.2914 C 3.6518 8.842 4.0162 8.4777 4.4656 8.4777 H 11.6897 C 12.1391 8.4778 12.5034 8.8421 12.5034 9.2914 Z M 5.9878 3.0741 H 4.6847 V 0.9565 H 5.9878 V 3.0741 Z M 7.91 3.0741 H 6.6069 V 0.9565 H 7.91 V 3.0741 Z M 9.8322 3.0741 H 8.529 V 0.9565 H 9.8322 V 3.0741 Z M 11.7543 3.0741 H 10.4512 V 0.9565 H 11.7543 V 3.0741 Z M 13.6765 3.0741 H 12.3734 V 0.9565 H 13.6765 V 3.0741 Z M 10.1054 10.5021 H 5.3363 C 5.1154 10.5021 4.9363 10.323 4.9363 10.1021 C 4.9363 9.8811 5.1154 9.7021 5.3363 9.7021 H 10.1054 C 10.3262 9.7021 10.5054 9.8811 10.5054 10.1021 C 10.5054 10.323 10.3262 10.5021 10.1054 10.5021 Z M 9.5343 12.5554 H 5.412 C 5.1911 12.5554 5.012 12.3763 5.012 12.1554 S 5.1911 11.7554 5.412 11.7554 H 9.5343 C 9.7552 11.7554 9.9343 11.9344 9.9343 12.1554 S 9.7552 12.5554 9.5343 12.5554 Z"/>
        </symbol>
        <symbol id="print_icon" viewBox="0 0 16 16">
            <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
            <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
        </symbol>
        <symbol id="z_icon" viewBox="0 0 16 16">
            <path d="m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"/>
            <path d="m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"/>
        </symbol>   
        <symbol id="Person_icon" viewBox="0 0 16 16">
        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
    </symbol>   
        <symbol id="block_icon" viewBox="0 0 16 16">
        <path d="M3 0h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2m0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm0 8h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2m0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"/>
    </symbol>  
        <symbol id="cloudload_icon" viewBox="0 0 16 16">
            <path fill="currentColor"
            d="M503 1089q110 0 200.5 -59.5t134.5 -156.5q44 14 90 14q120 0 205 -86.5t85 -207t-85 -207t-205 -86.5h-128v250q0 21 -14.5 35.5t-35.5 14.5h-300q-21 0 -35.5 -14.5t-14.5 -35.5v-250h-222q-80 0 -136 57.5t-56 136.5q0 69 43 122.5t108 67.5q-2 19 -2 37q0 100 49 185 t134 134t185 49zM525 500h150q10 0 17.5 -7.5t7.5 -17.5v-275h137q21 0 26 -11.5t-8 -27.5l-223 -244q-13 -16 -32 -16t-32 16l-223 244q-13 16 -8 27.5t26 11.5h137v275q0 10 7.5 17.5t17.5 7.5z">
            </path>
        </symbol>   
        <symbol id="download_icon" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M3.5 6a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 14 6.5v8a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-8A1.5 1.5 0 0 1 3.5 5h2a.5.5 0 0 1 0 1z"/>
        <path fill-rule="evenodd" d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
        </symbol>   
        <symbol  id="ethernet_icon" viewBox="0 0 16 16">
        <path d="M14 13.5v-7a.5.5 0 0 0-.5-.5H12V4.5a.5.5 0 0 0-.5-.5h-1v-.5A.5.5 0 0 0 10 3H6a.5.5 0 0 0-.5.5V4h-1a.5.5 0 0 0-.5.5V6H2.5a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5M3.75 11h.5a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25m2 0h.5a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25m1.75.25a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zM9.75 11h.5a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25m1.75.25a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25z"/>
        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 2a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1z"/>
        </symbol>
        <symbol id="modbus_icon" viewBox="0 0 16 16">
        <path d="M4.5 5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M3 4.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"/>
        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H8.5v3a1.5 1.5 0 0 1 1.5 1.5h5.5a.5.5 0 0 1 0 1H10A1.5 1.5 0 0 1 8.5 14h-1A1.5 1.5 0 0 1 6 12.5H.5a.5.5 0 0 1 0-1H6A1.5 1.5 0 0 1 7.5 10V7H2a2 2 0 0 1-2-2zm1 0v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1m6 7.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5"/>
        </symbol>
        <symbol id="app_icon" viewBox="0 0 16 16">
        <path d="M3 3.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m1.5 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m1 .5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"/>
        <path d="M.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5zM1 5V2h14v3zm0 1h14v8H1z"/>
        </symbol>
        <symbol id="add_app_icon" viewBox="0 0 16 16">
        <path d="M2.5 5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M4 5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1m2-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"/>
        <path d="M0 4a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v4a.5.5 0 0 1-1 0V7H1v5a1 1 0 0 0 1 1h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-2zm1 2h13V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1z"/>
        <path d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1h-1a.5.5 0 0 0 0 1h1v1a.5.5 0 0 0 1 0v-1h1a.5.5 0 0 0 0-1h-1v-1a.5.5 0 0 0-.5-.5"/>
        </symbol>
        <symbol id="trash" viewBox="0 0 16 16">
            <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
        </symbol>
        <symbol id="upload_icon" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"/>
        </symbol>
        <symbol id="upload_file_icon" viewBox="0 0 16 16">
            <path d="M8.5 11.5a.5.5 0 0 1-1 0V7.707L6.354 8.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 7.707z"/>
            <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>
        </symbol>
        <symbol id="file_zip_icon" viewBox="0 0 16 16">
            <path d="M5 7.5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v.938l.4 1.599a1 1 0 0 1-.416 1.074l-.93.62a1 1 0 0 1-1.11 0l-.929-.62a1 1 0 0 1-.415-1.074L5 8.438zm2 0H6v.938a1 1 0 0 1-.03.243l-.4 1.598.93.62.929-.62-.4-1.598A1 1 0 0 1 7 8.438z"/>
            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1h-2v1h-1v1h1v1h-1v1h1v1H6V5H5V4h1V3H5V2h1V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
        </symbol>
        <symbol id="file_music_icon" viewBox="0 0 16 16">
            <path d="M10.304 3.13a1 1 0 0 1 1.196.98v1.8l-2.5.5v5.09c0 .495-.301.883-.662 1.123C7.974 12.866 7.499 13 7 13s-.974-.134-1.338-.377C5.302 12.383 5 11.995 5 11.5s.301-.883.662-1.123C6.026 10.134 6.501 10 7 10c.356 0 .7.068 1 .196V4.41a1 1 0 0 1 .804-.98z"/>
            <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1"/>
        </symbol>
        <symbol id="file_json_icon" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M14 4.5V11h-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM4.151 15.29a1.2 1.2 0 0 1-.111-.449h.764a.58.58 0 0 0 .255.384q.105.073.25.114.142.041.319.041.245 0 .413-.07a.56.56 0 0 0 .255-.193.5.5 0 0 0 .084-.29.39.39 0 0 0-.152-.326q-.152-.12-.463-.193l-.618-.143a1.7 1.7 0 0 1-.539-.214 1 1 0 0 1-.352-.367 1.1 1.1 0 0 1-.123-.524q0-.366.19-.639.192-.272.528-.422.337-.15.777-.149.456 0 .779.152.326.153.5.41.18.255.2.566h-.75a.56.56 0 0 0-.12-.258.6.6 0 0 0-.246-.181.9.9 0 0 0-.37-.068q-.324 0-.512.152a.47.47 0 0 0-.185.384q0 .18.144.3a1 1 0 0 0 .404.175l.621.143q.326.075.566.211a1 1 0 0 1 .375.358q.135.222.135.56 0 .37-.188.656a1.2 1.2 0 0 1-.539.439q-.351.158-.858.158-.381 0-.665-.09a1.4 1.4 0 0 1-.478-.252 1.1 1.1 0 0 1-.29-.375m-3.104-.033a1.3 1.3 0 0 1-.082-.466h.764a.6.6 0 0 0 .074.27.5.5 0 0 0 .454.246q.285 0 .422-.164.137-.165.137-.466v-2.745h.791v2.725q0 .66-.357 1.005-.355.345-.985.345a1.6 1.6 0 0 1-.568-.094 1.15 1.15 0 0 1-.407-.266 1.1 1.1 0 0 1-.243-.39m9.091-1.585v.522q0 .384-.117.641a.86.86 0 0 1-.322.387.9.9 0 0 1-.47.126.9.9 0 0 1-.47-.126.87.87 0 0 1-.32-.387 1.55 1.55 0 0 1-.117-.641v-.522q0-.386.117-.641a.87.87 0 0 1 .32-.387.87.87 0 0 1 .47-.129q.265 0 .47.129a.86.86 0 0 1 .322.387q.117.255.117.641m.803.519v-.513q0-.565-.205-.973a1.46 1.46 0 0 0-.59-.63q-.38-.22-.916-.22-.534 0-.92.22a1.44 1.44 0 0 0-.589.628q-.205.407-.205.975v.513q0 .562.205.973.205.407.589.626.386.217.92.217.536 0 .917-.217.384-.22.589-.626.204-.41.205-.973m1.29-.935v2.675h-.746v-3.999h.662l1.752 2.66h.032v-2.66h.75v4h-.656l-1.761-2.676z"/>
        </symbol>

        <symbol id="file_json_icon1" viewBox="0 0 16 16">
            <path d="m.5 3 .04.87a2 2 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2m5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19q-.362.002-.683.12L1.5 2.98a1 1 0 0 1 1-.98z"/>
            <path d="M13.5 9a.5.5 0 0 1 .5.5V11h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V12h-1.5a.5.5 0 0 1 0-1H13V9.5a.5.5 0 0 1 .5-.5"/>
        </symbol>
        <symbol id="folder_icon" viewBox="0 0 16 16">
            <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z"/>
        </symbol>
        <symbol id="file_excel_icon" viewBox="0 0 16 16">
            <path d="M5.884 6.68a.5.5 0 1 0-.768.64L7.349 10l-2.233 2.68a.5.5 0 0 0 .768.64L8 10.781l2.116 2.54a.5.5 0 0 0 .768-.641L8.651 10l2.233-2.68a.5.5 0 0 0-.768-.64L8 9.219l-2.116-2.54z"/>
            <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>
        </symbol>
        <symbol id="folder_icon" viewBox="0 0 16 16">
            <path d="M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3m-8.322.12q.322-.119.684-.12h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981z"/>
        </symbol>
        <symbol id="download_icon" viewBox="0 0 16 16">
              <path fill="currentColor" d="M450 1200h200q21 0 35.5 -14.5t14.5 -35.5v-350h245q20 0 25 -11t-9 -26l-383 -426q-14 -15 -33.5 -15t-32.5 15l-379 426q-13 15 -8.5 26t25.5 11h250v350q0 21 14.5 35.5t35.5 14.5zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z">
              </path>
        </symbol>
        <symbol id="hdd_icon" viewBox="0 0 16 16">
            <path d="M0 10a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1m2 0a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M.91 7.204A3 3 0 0 1 2 7h12c.384 0 .752.072 1.09.204l-1.867-3.422A1.5 1.5 0 0 0 11.906 3H4.094a1.5 1.5 0 0 0-1.317.782z"/>
        </symbol>
    </svg>
    <div class="header">
        <div class="header-logo-container">
        <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="26.6464mm" height="6.209mm" version="1.1" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 341.95 79.68" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xodm="http://www.corel.com/coreldraw/odm/2003">
            <g id="Layer_x0020_1">
             <metadata id="CorelCorpID_0Corel-Layer"></metadata>
             <g id="_105553235393408">
              <g>
               <path fill="white" fill-rule="nonzero" d="M98.93 46.66c-0.01,0.23 -0.03,0.45 -0.07,0.68 -0.02,0.14 -0.05,0.28 -0.08,0.42 -0.02,0.11 -0.05,0.22 -0.09,0.33 -0.03,0.12 -0.07,0.24 -0.11,0.35 -0.03,0.11 -0.08,0.23 -0.12,0.34 -0.05,0.12 -0.1,0.24 -0.16,0.37 -1.57,3.38 -5.58,4.83 -8.95,3.26 -3.32,-1.55 -4.79,-5.48 -3.32,-8.83 0.02,-0.05 0.03,-0.09 0.06,-0.13 0.02,-0.04 0.03,-0.07 0.05,-0.1 0.85,-1.77 2.38,-3 4.14,-3.51 0.12,-0.03 0.25,-0.07 0.38,-0.1 0.13,-0.03 0.26,-0.05 0.38,-0.08 0.12,-0.02 0.23,-0.03 0.34,-0.05 0.15,-0.02 0.3,-0.03 0.45,-0.03 0.24,-0.02 0.48,-0.02 0.73,-0.01 0.22,0.01 0.44,0.03 0.66,0.07 0.15,0.02 0.3,0.05 0.45,0.09 0.45,0.11 0.89,0.26 1.32,0.46 2.02,0.95 3.39,2.76 3.82,4.79 0.03,0.13 0.05,0.27 0.07,0.41 0.06,0.42 0.08,0.85 0.06,1.29l-0 0z"></path>
               <path fill="white" fill-rule="nonzero" d="M122.4 60.4c-6.79,14.58 -22.85,21.94 -37.92,18.39 -2.18,-0.51 -4.35,-1.25 -6.45,-2.24 -2.08,-0.97 -4,-2.12 -5.78,-3.43l3.27 -7.01 0.01 0 2.63 -5.64 6.63 -14.23c-0.02,2.81 1.57,5.51 4.28,6.78 2.71,1.27 5.8,0.75 7.93,-1.07l-6.62 14.19c8.11,0.71 16.17,-3.63 19.8,-11.42 3.64,-7.79 1.78,-16.76 -3.98,-22.51 -0.23,-0.24 -0.48,-0.47 -0.73,-0.68 -0.33,-6.49 -2.35,-12.54 -5.63,-17.71 2.17,0.52 4.31,1.26 6.41,2.23 2.11,0.98 4.07,2.16 5.87,3.49 12.41,9.26 17.08,26.3 10.29,40.88l0 0z"></path>
               <path fill="white" fill-rule="nonzero" d="M63.08 29.84c1.19,-1.91 3.31,-3.18 5.72,-3.18 1.02,0 1.99,0.23 2.86,0.63 0.02,0.02 0.05,0.03 0.08,0.04 2.25,1.09 3.79,3.4 3.79,6.06 0,0.93 -0.19,1.82 -0.53,2.62 -0.05,0.12 -0.1,0.22 -0.15,0.33l-0.09 0.2 -0.01 0.02 -1.25 2.68 0 0.02 -0.02 0.02 -6.5 13.94 -0.89 1.91 -2.31 4.94 -0.31 0.68c-0.21,0.42 -0.42,0.85 -0.64,1.25 -0.02,0.04 -0.05,0.09 -0.08,0.13 -0.08,0.14 -0.15,0.28 -0.22,0.41 -0.61,1.1 -1.29,2.17 -2.04,3.19 -0.5,0.7 -1.03,1.37 -1.58,2.02 -0.09,0.12 -0.19,0.23 -0.28,0.34 -0.13,0.16 -0.27,0.31 -0.41,0.47 -0.12,0.12 -0.23,0.24 -0.34,0.37 -6.09,6.6 -14.83,10.73 -24.5,10.73 -4.86,0 -9.47,-1.04 -13.64,-2.91l-0.82 -0.38c-11.18,-5.4 -18.92,-16.86 -18.92,-30.09 0,-4.86 1.04,-9.47 2.91,-13.64l0.38 -0.82c4.46,-9.24 13.05,-16.13 23.37,-18.24l0 0c1.99,-0.41 4.04,-0.64 6.14,-0.67 0.19,0 0.38,0 0.57,0 0.36,0 0.71,0 1.06,0.02l0 0c1.24,0.04 2.46,0.15 3.67,0.32 1.01,0.14 2,0.33 2.98,0.56 0.09,0.02 0.18,0.04 0.27,0.06l0 0c0,0 0.03,0.01 0.05,0.02 0.08,0.02 0.17,0.04 0.25,0.07l0 0c0.05,-0.08 0.1,-0.14 0.15,-0.21 0.05,-0.07 0.1,-0.13 0.15,-0.21 0.01,-0.02 0.02,-0.03 0.03,-0.05 0.21,-0.28 0.42,-0.56 0.63,-0.82 0.17,-0.22 0.35,-0.42 0.52,-0.64 0.02,-0.03 0.06,-0.07 0.09,-0.1 0.16,-0.19 0.32,-0.38 0.49,-0.57 0.05,-0.06 0.1,-0.12 0.15,-0.17 0.15,-0.17 0.3,-0.34 0.46,-0.51 0.26,-0.27 0.51,-0.55 0.77,-0.8 0.19,-0.2 0.39,-0.39 0.59,-0.57 0.3,-0.29 0.61,-0.57 0.92,-0.85 0.16,-0.14 0.32,-0.28 0.49,-0.42 0.52,-0.45 1.05,-0.87 1.6,-1.29 0.25,-0.19 0.5,-0.37 0.75,-0.56 0.22,-0.16 0.44,-0.31 0.66,-0.46 0.12,-0.09 0.25,-0.17 0.38,-0.25 0.18,-0.12 0.37,-0.24 0.55,-0.35 0.02,-0.01 0.03,-0.02 0.05,-0.02 0.22,-0.14 0.44,-0.28 0.66,-0.41 0.31,-0.18 0.64,-0.37 0.96,-0.55 0.27,-0.15 0.53,-0.28 0.8,-0.42 0.02,-0.01 0.05,-0.02 0.07,-0.03 0.56,-0.29 1.14,-0.56 1.72,-0.82 0.3,-0.13 0.59,-0.26 0.89,-0.38 0.86,-0.36 1.75,-0.67 2.65,-0.96 0.03,0 0.06,-0.02 0.09,-0.02 0.3,-0.09 0.59,-0.17 0.89,-0.26 0.04,-0.02 0.09,-0.02 0.14,-0.04 0.25,-0.07 0.5,-0.13 0.75,-0.19 0.07,-0.02 0.14,-0.04 0.21,-0.06 0.28,-0.07 0.57,-0.13 0.85,-0.19 0.32,-0.07 0.65,-0.13 0.98,-0.19 0.32,-0.06 0.65,-0.12 0.98,-0.17 0.36,-0.06 0.72,-0.11 1.09,-0.15 0.3,-0.03 0.6,-0.07 0.9,-0.09 0.31,-0.03 0.64,-0.06 0.96,-0.08 0.02,0 0.04,0 0.07,0 0.31,-0.02 0.63,-0.03 0.95,-0.05l0.08 0c0.33,-0.01 0.66,-0.02 1,-0.02l0.02 0c0.31,0 0.62,0 0.92,0.02 0.31,0 0.61,0.02 0.92,0.03 0.23,0.01 0.47,0.02 0.7,0.05 0.17,0.01 0.35,0.02 0.52,0.05 0.22,0.02 0.42,0.03 0.63,0.06 0.29,0.03 0.57,0.07 0.86,0.11 0.03,0 0.06,0 0.1,0.01 0.22,0.03 0.44,0.06 0.66,0.1 0.19,0.03 0.38,0.06 0.57,0.1 0.26,0.05 0.51,0.09 0.77,0.15 0.07,0.01 0.13,0.02 0.2,0.04 0.21,0.04 0.41,0.09 0.61,0.13 0.05,0.01 0.11,0.02 0.16,0.04 0.23,0.06 0.46,0.12 0.7,0.17 0.27,0.07 0.53,0.14 0.8,0.22 0.53,0.15 1.04,0.31 1.57,0.49 0.12,0.04 0.25,0.08 0.37,0.13 0.18,0.06 0.36,0.12 0.53,0.19 0.27,0.1 0.54,0.2 0.8,0.31 0.22,0.09 0.44,0.17 0.65,0.27 0.18,0.08 0.37,0.16 0.55,0.24 0.08,0.03 0.15,0.06 0.22,0.1 0.08,0.04 0.16,0.08 0.24,0.11 0.03,0.02 0.07,0.03 0.11,0.05 0.04,0.02 0.08,0.03 0.11,0.05 0.16,0.08 0.32,0.15 0.48,0.23 0.15,0.07 0.29,0.14 0.43,0.22 0.48,0.24 0.95,0.5 1.42,0.77 0.22,0.12 0.45,0.26 0.67,0.39 0.27,0.17 0.55,0.34 0.82,0.51 0.41,0.27 0.82,0.55 1.22,0.83 0.45,0.31 0.88,0.64 1.31,0.98 0.2,0.16 0.41,0.32 0.6,0.49 0.2,0.16 0.39,0.32 0.59,0.5 0.21,0.17 0.41,0.37 0.62,0.55 0.4,0.36 0.78,0.73 1.16,1.11 0.19,0.18 0.37,0.38 0.56,0.57 0.19,0.19 0.37,0.39 0.55,0.59 0.37,0.39 0.71,0.8 1.05,1.21 0.16,0.2 0.32,0.39 0.48,0.6 0.01,0.01 0.02,0.02 0.03,0.04 3.59,4.57 6.01,10.09 6.82,16.11 -0.44,-0.24 -0.88,-0.47 -1.33,-0.69 -2.12,-0.99 -4.33,-1.57 -6.54,-1.77 -1.48,-0.14 -2.96,-0.11 -4.41,0.08 -0.66,0.08 -1.32,0.21 -1.97,0.36 -0.04,-0.12 -0.08,-0.23 -0.13,-0.35 -0.05,-0.15 -0.11,-0.3 -0.17,-0.45 -0.03,-0.09 -0.07,-0.18 -0.11,-0.27 -0.08,-0.21 -0.17,-0.41 -0.27,-0.62 -0.02,-0.05 -0.03,-0.09 -0.06,-0.13 -0.07,-0.17 -0.16,-0.34 -0.24,-0.5 -0.08,-0.17 -0.17,-0.33 -0.26,-0.49 -0.05,-0.12 -0.12,-0.22 -0.17,-0.32 -0.05,-0.09 -0.1,-0.17 -0.15,-0.27 -0.11,-0.19 -0.22,-0.38 -0.34,-0.56 -0.05,-0.09 -0.1,-0.17 -0.16,-0.26 -0.09,-0.15 -0.19,-0.3 -0.29,-0.44 -0.08,-0.12 -0.16,-0.24 -0.25,-0.36 -0.28,-0.4 -0.57,-0.79 -0.9,-1.17 -0.09,-0.12 -0.18,-0.23 -0.28,-0.34 -0.12,-0.15 -0.25,-0.28 -0.38,-0.42 -0.08,-0.09 -0.17,-0.19 -0.27,-0.28 -0.1,-0.12 -0.22,-0.23 -0.33,-0.34 -0.11,-0.12 -0.22,-0.23 -0.34,-0.33 -0.22,-0.22 -0.45,-0.42 -0.68,-0.62 -0.19,-0.17 -0.38,-0.33 -0.59,-0.48 -0.18,-0.16 -0.37,-0.3 -0.56,-0.44 -0.06,-0.05 -0.11,-0.09 -0.17,-0.12 -0.2,-0.16 -0.41,-0.3 -0.62,-0.44 -0.02,-0.01 -0.02,-0.02 -0.03,-0.02 -0.26,-0.17 -0.51,-0.33 -0.77,-0.49 -0.19,-0.12 -0.39,-0.23 -0.59,-0.34 -0.07,-0.04 -0.13,-0.08 -0.21,-0.12 0.02,-0.01 0.03,-0.02 0.05,-0.02l-1.38 -0.64c-0.74,-0.33 -1.5,-0.62 -2.28,-0.86 -0.13,-0.04 -0.26,-0.08 -0.39,-0.12 -0.21,-0.06 -0.41,-0.12 -0.62,-0.17 -0.13,-0.03 -0.27,-0.07 -0.41,-0.1 -0.13,-0.04 -0.27,-0.06 -0.41,-0.09 -0.51,-0.11 -1.03,-0.2 -1.56,-0.26 -0.16,-0.02 -0.32,-0.04 -0.49,-0.06 -0.13,-0.02 -0.27,-0.02 -0.4,-0.03 -0.18,-0.02 -0.36,-0.03 -0.54,-0.03 -0.37,-0.02 -0.73,-0.03 -1.09,-0.03 -0.89,0 -1.76,0.06 -2.62,0.17 -0.46,0.06 -0.93,0.14 -1.39,0.23 -0.52,0.11 -1.04,0.24 -1.54,0.38 -0.28,0.08 -0.57,0.17 -0.85,0.27 -0.31,0.11 -0.62,0.22 -0.92,0.34 -0.29,0.12 -0.57,0.24 -0.86,0.37 -0.16,0.08 -0.31,0.15 -0.47,0.22 -0.28,0.13 -0.56,0.27 -0.82,0.42 -0.01,0 -0.02,0.01 -0.03,0.02 -0.28,0.16 -0.56,0.31 -0.84,0.48 -0.4,0.24 -0.79,0.5 -1.17,0.77 -0.93,0.66 -1.8,1.4 -2.6,2.21 -0.22,0.22 -0.44,0.46 -0.66,0.69 -0.14,0.16 -0.28,0.31 -0.42,0.48 -0.3,0.35 -0.58,0.71 -0.85,1.09 -0.1,0.14 -0.21,0.28 -0.31,0.43 -0.29,0.41 -0.56,0.84 -0.82,1.28 -0.13,0.22 -0.26,0.44 -0.37,0.66 -0.12,0.22 -0.24,0.45 -0.35,0.67l-0.05 0.1 -0.21 0.46 -0.08 0.17 -3.16 6.77 -0.51 1.1 -7.3 15.65 -0.17 0.36c-0.53,1.07 -1.34,1.99 -2.34,2.65 -1.05,0.7 -2.33,1.11 -3.7,1.11 -3.72,0 -6.74,-3.02 -6.74,-6.74 0,-0.93 0.19,-1.82 0.53,-2.62 0.05,-0.12 0.1,-0.24 0.16,-0.35l4.74 -10.16 3.12 -6.7c-0.6,-0.06 -1.2,-0.08 -1.81,-0.08 -0.21,0 -0.43,0 -0.64,0.02 -1.71,0.05 -3.37,0.32 -4.94,0.78 -5.45,1.59 -9.93,5.45 -12.36,10.49l-0.22 0.46c-1.13,2.49 -1.75,5.26 -1.75,8.16 0,8.06 4.82,15.02 11.73,18.15 2.5,1.13 5.27,1.76 8.18,1.76 4.15,0 8.01,-1.28 11.2,-3.46 0.34,-0.23 0.67,-0.47 1,-0.73 0.03,-0.02 0.08,-0.06 0.11,-0.09 0.09,-0.06 0.17,-0.13 0.26,-0.21 0.79,-0.64 1.53,-1.33 2.21,-2.09l0 0c2.14,-2.33 3.43,-5.21 5.73,-10.19 0.28,-0.61 0.57,-1.24 0.89,-1.91l6.34 -13.58 0.01 -0.02 0.01 -0.03 1.44 -3.09 0.5 -0.96 0.02 -0.01z"></path>
               <path fill="white" fill-rule="nonzero" d="M98.3 49.13c-1.57,3.38 -5.58,4.83 -8.95,3.26 -3.37,-1.57 -4.83,-5.58 -3.26,-8.96 1.57,-3.37 5.58,-4.83 8.96,-3.25 3.37,1.57 4.83,5.58 3.26,8.95z"></path>
               <path fill="white" fill-rule="nonzero" d="M92.21 39.55c-0.12,0.01 -0.25,0.01 -0.38,0.02 0.24,-0.02 0.48,-0.02 0.73,-0.01 -0.12,-0.01 -0.23,-0.01 -0.35,-0.01l0 0z"></path>
              </g>
              <g>
               <g>
                <g>
                 <path fill="white" fill-rule="nonzero" d="M238.63 8.9c-0.08,0 -0.17,0 -0.26,0l0.5 0c-0.08,0 -0.17,0 -0.25,0z"></path>
                 <path fill="white" fill-rule="nonzero" d="M236.86 40.6c0,-3.13 0.58,-6.05 1.75,-8.75 1.17,-2.7 2.77,-5.07 4.8,-7.1 2.03,-2.03 4.42,-3.63 7.15,-4.8 2.73,-1.17 5.63,-1.75 8.7,-1.75 3.06,0 6.05,0.59 8.75,1.75 2.7,1.17 5.08,2.77 7.15,4.8 2.07,2.04 3.69,4.4 4.85,7.1 1.17,2.7 1.75,5.62 1.75,8.75 0,3.13 -0.59,5.96 -1.75,8.7 -1.17,2.73 -2.78,5.14 -4.85,7.2 -2.06,2.07 -4.45,3.69 -7.15,4.85 -2.7,1.17 -5.62,1.75 -8.75,1.75 -3.13,0 -5.96,-0.58 -8.7,-1.75 -2.73,-1.17 -5.12,-2.78 -7.15,-4.85 -2.04,-2.06 -3.63,-4.46 -4.8,-7.2 -1.17,-2.73 -1.75,-5.63 -1.75,-8.7zm8.8 0c0,1.87 0.35,3.63 1.05,5.3 0.7,1.67 1.67,3.12 2.9,4.35 1.23,1.24 2.68,2.2 4.35,2.9 1.67,0.7 3.44,1.05 5.3,1.05 1.86,0 3.63,-0.35 5.3,-1.05 1.67,-0.7 3.12,-1.66 4.35,-2.9 1.24,-1.24 2.2,-2.68 2.9,-4.35 0.7,-1.66 1.05,-3.43 1.05,-5.3 0,-1.86 -0.35,-3.61 -1.05,-5.25 -0.7,-1.63 -1.66,-3.06 -2.9,-4.3 -1.24,-1.23 -2.69,-2.2 -4.35,-2.9 -1.66,-0.7 -3.43,-1.05 -5.3,-1.05 -1.86,0 -3.63,0.35 -5.3,1.05 -1.67,0.7 -3.12,1.67 -4.35,2.9 -1.24,1.24 -2.2,2.67 -2.9,4.3 -0.7,1.64 -1.05,3.38 -1.05,5.25z"></path>
                 <g>
                  <path fill="white" fill-rule="nonzero" d="M189.7 14.6c-0.47,1.1 -0.7,2.26 -0.7,3.51 0,1.25 0.24,2.43 0.7,3.54 0.46,1.11 1.11,2.08 1.94,2.91 0.82,0.82 1.79,1.47 2.9,1.94 1.11,0.47 2.29,0.7 3.54,0.7l18.06 0c2.45,0 4.77,0.47 6.96,1.4 2.19,0.93 4.09,2.22 5.71,3.84 1.1,1.1 2.04,2.32 2.82,3.66l0 0c0,0 0,0.01 0,0.01 0.37,0.64 0.71,1.31 1.01,2 0.93,2.15 1.4,4.49 1.4,6.99 0,2.51 -0.46,4.77 -1.4,6.96 -0.32,0.74 -0.67,1.44 -1.07,2.12 0,0 0,0.01 -0.01,0.01 -0.77,1.33 -1.69,2.54 -2.76,3.62 -1.63,1.65 -3.53,2.95 -5.72,3.88 -0.37,0.16 -0.74,0.31 -1.13,0.44 -1.85,0.64 -3.79,0.96 -5.83,0.96l-35.99 0 0 -8.9 35.99 0c1.25,0 2.43,-0.23 3.54,-0.7 1.11,-0.47 2.08,-1.11 2.9,-1.94 0.82,-0.83 1.47,-1.79 1.94,-2.91 0.47,-1.11 0.7,-2.29 0.7,-3.54 0,-1.25 -0.24,-2.41 -0.7,-3.51 -0.46,-1.09 -1.11,-2.05 -1.94,-2.87 -0.82,-0.82 -1.79,-1.47 -2.9,-1.94 -0.96,-0.4 -1.97,-0.63 -3.03,-0.68 -0.06,0 -0.12,-0.01 -0.19,-0.01 -0.02,0 -0.05,0 -0.06,0 -0.09,0 -0.17,0 -0.26,0 -0.08,0 -0.17,0 -0.25,0l-18.19 0c-1.9,-0.04 -3.71,-0.36 -5.45,-0.96 -0.38,-0.13 -0.75,-0.27 -1.13,-0.44 -2.19,-0.93 -4.09,-2.22 -5.71,-3.88 -1.07,-1.09 -2,-2.3 -2.76,-3.62 0,0 0,-0.01 -0.01,-0.01 -0.4,-0.68 -0.75,-1.39 -1.07,-2.12 -0.93,-2.18 -1.4,-4.5 -1.4,-6.96 0,-2.45 0.46,-4.84 1.4,-6.99 0.3,-0.7 0.64,-1.36 1.01,-2 0,0 0.01,-0.01 0.01,-0.01 0.78,-1.35 1.72,-2.56 2.82,-3.66 1.63,-1.62 3.53,-2.91 5.71,-3.84 2.18,-0.93 4.5,-1.4 6.96,-1.4l35.99 0 0 8.9 -35.73 0c-0.08,0 -0.17,0 -0.25,0 -0.08,0 -0.17,0 -0.26,0 -0.09,0 -0.17,0.01 -0.26,0.01 -1.06,0.05 -2.07,0.28 -3.03,0.69 -1.11,0.47 -2.08,1.11 -2.9,1.94 -0.82,0.82 -1.47,1.78 -1.94,2.87l0 0z"></path>
                  <path fill="white" fill-rule="nonzero" d="M216.46 36.09l-18.38 0c-0.13,0 -0.26,0 -0.38,0l18.19 0c0.08,0 0.17,0 0.25,0 0.08,0 0.17,0 0.26,0 0.02,0 0.05,0 0.06,0l0.01 0z"></path>
                 </g>
                 <path fill="white" fill-rule="nonzero" d="M302.05 9.95c-1.67,0.7 -3.12,1.67 -4.35,2.9 -1.24,1.24 -2.2,2.67 -2.9,4.3 -0.7,1.64 -1.05,3.38 -1.05,5.25l0 4.6 18 0 0 8.9 -18 0 0 27 -8.9 0 0 -40.49c0,-3.13 0.58,-6.05 1.75,-8.75 1.17,-2.7 2.78,-5.07 4.85,-7.1 2.06,-2.03 4.47,-3.63 7.2,-4.8 2.73,-1.17 5.63,-1.75 8.7,-1.75l4.4 0 0 8.9 -4.4 0c-1.87,0 -3.63,0.35 -5.3,1.05l0 -0.01z"></path>
                 <path fill="white" fill-rule="nonzero" d="M341.95 54l0 8.9 -4.4 0c-3.07,0 -5.97,-0.58 -8.7,-1.75 -2.73,-1.17 -5.14,-2.78 -7.2,-4.85 -2.07,-2.06 -3.69,-4.47 -4.85,-7.2 -1.17,-2.73 -1.75,-5.63 -1.75,-8.7l0 -40.4 8.9 0 0 27 18 0 0 8.9 -18 0 0 4.5c0,1.87 0.35,3.63 1.05,5.3 0.7,1.67 1.66,3.12 2.9,4.35 1.23,1.24 2.68,2.2 4.35,2.9 1.66,0.7 3.43,1.05 5.3,1.05l4.4 0z"></path>
                </g>
                <polygon fill="white" fill-rule="nonzero" points="162.61,42.66 179.73,42.66 179.73,47.21 162.61,47.21 "></polygon>
                <g>
                 <path fill="#FFCE09" fill-rule="nonzero" d="M157.4 23.53c0,-2.88 -2.25,-5.33 -5.23,-5.33 -2.79,0 -5.09,2.59 -5.09,5.28 0,3.03 2.15,5.42 5.23,5.42 2.88,0 5.09,-2.54 5.09,-5.38z"></path>
                 <path fill="#FFCE09" fill-rule="nonzero" d="M162.41 59.15c-3.61,1.37 -6.5,1.23 -8.44,0.77 -1.31,-0.16 -2.18,-0.59 -2.76,-1.1l-0.01 0c-1.15,-1.04 -1.14,-2.45 -1.14,-2.9 0,-0.59 0.31,-2.05 0.46,-2.63l5.08 -18c0.05,-0.2 0.39,-1.47 0.39,-1.67 0,-0.39 -0.05,-0.63 -0.44,-0.63 -0.3,0 -0.78,0.2 -1.07,0.34 -2.25,0.74 -7.09,1.22 -9.53,1.22l-1.86 0c-0.1,0.54 -0.39,1.37 -0.39,1.9 0,1.32 2.25,0.29 2.25,2.4 0,0.34 -0.05,0.59 -0.2,0.98l-2.7 10.22c-0.3,1.22 -0.67,2.64 -0.73,3.86 -0.38,7.39 5.95,8.84 8.76,9.11 3.23,0.31 7.79,-0.31 10.22,-1.18 0.79,-0.28 1.47,-0.56 2.12,-0.86l0 -1.83 -0.01 0z"></path>
                </g>
               </g>
               <g>
                <path fill="white" fill-rule="nonzero" d="M143.27 77.94l4.66 0 0 1.59 -6.63 0 0 -8.56 6.47 0 0 1.59 -4.5 0 0 5.38 0.01 0zm-0.15 -3.53l4.12 0 0 1.56 -4.12 0 0 -1.56z"></path>
                <polygon fill="white" fill-rule="nonzero" points="149.51,79.53 149.51,70.96 151.15,70.96 156.2,77.13 155.41,77.13 155.41,70.96 157.36,70.96 157.36,79.53 155.72,79.53 150.66,73.36 151.46,73.36 151.46,79.53 149.5,79.53 "></polygon>
                <path fill="white" fill-rule="nonzero" d="M163.52 79.67c-0.68,0 -1.3,-0.11 -1.87,-0.32 -0.57,-0.21 -1.06,-0.52 -1.48,-0.92 -0.42,-0.4 -0.74,-0.87 -0.98,-1.4 -0.23,-0.53 -0.35,-1.13 -0.35,-1.78 0,-0.64 0.12,-1.24 0.35,-1.77 0.23,-0.54 0.56,-1 0.99,-1.4 0.42,-0.4 0.92,-0.71 1.49,-0.92 0.57,-0.22 1.2,-0.33 1.89,-0.33 0.76,0 1.44,0.13 2.05,0.38 0.61,0.26 1.12,0.62 1.54,1.1l-1.26 1.17c-0.32,-0.33 -0.66,-0.58 -1.03,-0.74 -0.37,-0.16 -0.77,-0.24 -1.21,-0.24 -0.41,0 -0.78,0.07 -1.13,0.2 -0.34,0.13 -0.64,0.33 -0.89,0.57 -0.25,0.24 -0.44,0.53 -0.57,0.87 -0.13,0.34 -0.2,0.71 -0.2,1.11 0,0.41 0.07,0.75 0.2,1.1 0.13,0.34 0.32,0.63 0.57,0.88 0.25,0.24 0.54,0.44 0.88,0.57 0.34,0.14 0.71,0.21 1.12,0.21 0.41,0 0.77,-0.06 1.14,-0.2 0.37,-0.13 0.73,-0.35 1.08,-0.65l1.13 1.43c-0.48,0.36 -1.02,0.63 -1.62,0.81 -0.61,0.18 -1.22,0.27 -1.83,0.27l-0.01 -0.01zm1.65 -1.35l0 -3.21 1.81 0 0 3.48 -1.81 -0.26 0 -0.01z"></path>
                <path fill="white" fill-rule="nonzero" d="M167.69 79.53l3.81 -8.56 1.96 0 3.84 8.56 -2.08 0 -3.15 -7.56 0.79 0 -3.14 7.56 -2.03 0zm1.92 -1.83l0.5 -1.5 4.43 0 0.52 1.5 -5.44 0z"></path>
                <path fill="white" fill-rule="nonzero" d="M182.2 79.67c-0.68,0 -1.3,-0.11 -1.87,-0.32 -0.57,-0.21 -1.06,-0.52 -1.48,-0.92 -0.42,-0.4 -0.74,-0.87 -0.98,-1.4 -0.23,-0.53 -0.35,-1.13 -0.35,-1.78 0,-0.64 0.12,-1.24 0.35,-1.77 0.23,-0.54 0.56,-1 0.99,-1.4 0.42,-0.4 0.92,-0.71 1.49,-0.92 0.57,-0.22 1.2,-0.33 1.89,-0.33 0.76,0 1.44,0.13 2.05,0.38 0.61,0.26 1.12,0.62 1.54,1.1l-1.26 1.17c-0.32,-0.33 -0.66,-0.58 -1.03,-0.74 -0.37,-0.16 -0.77,-0.24 -1.21,-0.24 -0.41,0 -0.78,0.07 -1.13,0.2 -0.34,0.13 -0.64,0.33 -0.89,0.57 -0.25,0.24 -0.44,0.53 -0.57,0.87 -0.13,0.34 -0.2,0.71 -0.2,1.11 0,0.41 0.07,0.75 0.2,1.1 0.13,0.34 0.32,0.63 0.57,0.88 0.25,0.24 0.54,0.44 0.88,0.57 0.34,0.14 0.71,0.21 1.12,0.21 0.41,0 0.77,-0.06 1.14,-0.2 0.37,-0.13 0.73,-0.35 1.08,-0.65l1.13 1.43c-0.47,0.36 -1.02,0.63 -1.62,0.81 -0.61,0.18 -1.23,0.27 -1.83,0.27l-0.01 -0.01zm1.65 -1.35l0 -3.21 1.81 0 0 3.48 -1.81 -0.26 0 -0.01z"></path>
                <path fill="white" fill-rule="nonzero" d="M189.46 77.94l4.66 0 0 1.59 -6.63 0 0 -8.56 6.47 0 0 1.59 -4.5 0 0 5.38 0.01 0zm-0.15 -3.53l4.12 0 0 1.56 -4.12 0 0 -1.56z"></path>
                <polygon fill="white" fill-rule="nonzero" points="195.7,79.53 195.7,70.96 197.34,70.96 200.98,77 200.11,77 203.69,70.96 205.34,70.96 205.34,79.53 203.49,79.53 203.47,73.82 203.84,73.82 200.95,78.61 200.07,78.61 197.15,73.82 197.55,73.82 197.55,79.53 195.71,79.53 "></polygon>
                <path fill="white" fill-rule="nonzero" d="M209.36 77.94l4.66 0 0 1.59 -6.63 0 0 -8.56 6.47 0 0 1.59 -4.5 0 0 5.38 0.01 0zm-0.15 -3.53l4.12 0 0 1.56 -4.12 0 0 -1.56z"></path>
                <polygon fill="white" fill-rule="nonzero" points="215.59,79.53 215.59,70.96 217.23,70.96 222.28,77.13 221.49,77.13 221.49,70.96 223.44,70.96 223.44,79.53 221.8,79.53 216.75,73.36 217.54,73.36 217.54,79.53 215.59,79.53 "></polygon>
                <polygon fill="white" fill-rule="nonzero" points="227.25,79.53 227.25,72.58 224.51,72.58 224.51,70.97 231.97,70.97 231.97,72.58 229.23,72.58 229.23,79.53 "></polygon>
                <path fill="white" fill-rule="nonzero" d="M239.18 79.67c-0.62,0 -1.18,-0.1 -1.67,-0.31 -0.49,-0.2 -0.88,-0.48 -1.17,-0.83 -0.28,-0.35 -0.43,-0.75 -0.43,-1.21 0,-0.42 0.09,-0.81 0.28,-1.15 0.19,-0.34 0.49,-0.66 0.89,-0.95 0.41,-0.29 0.93,-0.59 1.57,-0.87 0.46,-0.21 0.81,-0.4 1.07,-0.56 0.26,-0.16 0.44,-0.32 0.55,-0.46 0.11,-0.15 0.16,-0.3 0.16,-0.46 0,-0.2 -0.07,-0.37 -0.21,-0.5 -0.15,-0.13 -0.35,-0.2 -0.63,-0.2 -0.3,0 -0.52,0.08 -0.68,0.22 -0.16,0.15 -0.24,0.34 -0.24,0.56 0,0.12 0.02,0.24 0.08,0.36 0.05,0.12 0.15,0.26 0.28,0.41 0.13,0.15 0.33,0.35 0.58,0.59l4.51 4.17 -1.03 1.21 -4.99 -4.64c-0.28,-0.26 -0.5,-0.49 -0.67,-0.72 -0.17,-0.23 -0.3,-0.45 -0.38,-0.68 -0.09,-0.23 -0.13,-0.45 -0.13,-0.68 0,-0.42 0.11,-0.78 0.34,-1.1 0.23,-0.32 0.54,-0.56 0.94,-0.74 0.4,-0.17 0.86,-0.26 1.39,-0.26 0.52,0 0.94,0.08 1.31,0.24 0.37,0.16 0.65,0.38 0.86,0.68 0.21,0.3 0.31,0.64 0.31,1.05 0,0.35 -0.09,0.68 -0.27,0.98 -0.17,0.3 -0.46,0.59 -0.84,0.84 -0.38,0.26 -0.88,0.53 -1.48,0.79 -0.41,0.19 -0.74,0.37 -0.98,0.55 -0.24,0.18 -0.42,0.35 -0.53,0.53 -0.1,0.17 -0.16,0.38 -0.16,0.6 0,0.2 0.06,0.38 0.19,0.54 0.12,0.16 0.3,0.29 0.53,0.37 0.23,0.08 0.5,0.13 0.82,0.13 0.5,0 0.95,-0.12 1.36,-0.35 0.41,-0.23 0.77,-0.57 1.06,-1.03 0.3,-0.46 0.5,-1.01 0.63,-1.67l1.53 0.46c-0.16,0.83 -0.46,1.56 -0.91,2.16 -0.45,0.61 -0.99,1.08 -1.64,1.42 -0.65,0.34 -1.37,0.5 -2.16,0.5l-0.01 -0.01z"></path>
                <path fill="white" fill-rule="nonzero" d="M253.02 79.67c-0.68,0 -1.3,-0.11 -1.87,-0.33 -0.57,-0.22 -1.07,-0.53 -1.49,-0.93 -0.42,-0.4 -0.75,-0.87 -0.99,-1.4 -0.23,-0.54 -0.35,-1.13 -0.35,-1.76 0,-0.64 0.12,-1.24 0.35,-1.77 0.23,-0.53 0.56,-1 0.99,-1.4 0.42,-0.4 0.92,-0.71 1.49,-0.93 0.57,-0.22 1.19,-0.33 1.86,-0.33 0.67,0 1.3,0.11 1.86,0.32 0.57,0.21 1.06,0.52 1.49,0.92 0.42,0.4 0.75,0.87 0.99,1.4 0.23,0.54 0.35,1.13 0.35,1.78 0,0.64 -0.12,1.22 -0.35,1.77 -0.23,0.54 -0.56,1.02 -0.99,1.41 -0.42,0.4 -0.92,0.71 -1.49,0.92 -0.57,0.22 -1.18,0.33 -1.85,0.33l0.01 -0zm-0.01 -1.68c0.38,0 0.74,-0.07 1.05,-0.2 0.33,-0.13 0.6,-0.32 0.85,-0.57 0.24,-0.25 0.44,-0.54 0.57,-0.87 0.13,-0.33 0.2,-0.7 0.2,-1.11 0,-0.41 -0.07,-0.78 -0.2,-1.11 -0.13,-0.33 -0.32,-0.62 -0.57,-0.87 -0.24,-0.25 -0.53,-0.44 -0.85,-0.57 -0.32,-0.13 -0.67,-0.2 -1.05,-0.2 -0.38,0 -0.74,0.07 -1.07,0.2 -0.33,0.13 -0.61,0.33 -0.85,0.57 -0.24,0.25 -0.43,0.54 -0.56,0.87 -0.13,0.33 -0.2,0.7 -0.2,1.11 0,0.41 0.07,0.78 0.2,1.11 0.13,0.33 0.32,0.62 0.56,0.87 0.24,0.25 0.52,0.44 0.85,0.57 0.32,0.13 0.68,0.2 1.07,0.2z"></path>
                <path fill="white" fill-rule="nonzero" d="M259.19 79.53l0 -8.56 3.71 0c0.77,0 1.43,0.12 1.99,0.37 0.56,0.25 0.98,0.6 1.28,1.07 0.3,0.46 0.45,1.02 0.45,1.65 0,0.64 -0.15,1.2 -0.45,1.66 -0.3,0.46 -0.73,0.82 -1.28,1.07 -0.56,0.25 -1.21,0.38 -1.99,0.38l-2.62 0 0.91 -0.89 0 3.26 -2 0 0 0.01zm2 -3.03l-0.9 -0.94 2.51 0c0.6,0 1.06,-0.13 1.37,-0.39 0.31,-0.26 0.46,-0.63 0.46,-1.1 0,-0.48 -0.16,-0.84 -0.46,-1.1 -0.31,-0.25 -0.77,-0.38 -1.37,-0.38l-2.51 0 0.91 -0.94 0 4.86 -0 -0.01z"></path>
                <polygon fill="white" fill-rule="nonzero" points="269.56,79.53 269.56,72.58 266.82,72.58 266.82,70.97 274.28,70.97 274.28,72.58 271.54,72.58 271.54,79.53 269.57,79.53 "></polygon>
                <polygon fill="white" fill-rule="nonzero" points="275.35,79.53 275.35,70.96 277.34,70.96 277.34,79.53 "></polygon>
                <polygon fill="white" fill-rule="nonzero" points="279.35,79.53 279.35,70.96 280.99,70.96 284.64,77 283.76,77 287.34,70.96 288.99,70.96 288.99,79.53 287.15,79.53 287.12,73.82 287.49,73.82 284.61,78.61 283.72,78.61 280.8,73.82 281.2,73.82 281.2,79.53 "></polygon>
                <polygon fill="white" fill-rule="nonzero" points="291.04,79.53 291.04,70.96 293.03,70.96 293.03,79.53 "></polygon>
                <polygon fill="white" fill-rule="nonzero" points="294.5,79.53 294.5,78.24 299.8,71.86 300.04,72.58 294.6,72.58 294.6,70.97 301.8,70.97 301.8,72.25 296.52,78.63 296.27,77.91 301.98,77.91 301.98,79.53 "></polygon>
                <path fill="white" fill-rule="nonzero" d="M302.13 79.53l3.81 -8.56 1.96 0 3.84 8.56 -2.08 0 -3.15 -7.56 0.79 0 -3.14 7.56 -2.03 0zm1.92 -1.83l0.5 -1.5 4.43 0 0.52 1.5 -5.44 0z"></path>
                <polygon fill="white" fill-rule="nonzero" points="313.97,79.53 313.97,72.58 311.23,72.58 311.23,70.97 318.69,70.97 318.69,72.58 315.96,72.58 315.96,79.53 313.98,79.53 "></polygon>
                <polygon fill="white" fill-rule="nonzero" points="319.76,79.53 319.76,70.96 321.75,70.96 321.75,79.53 "></polygon>
                <path fill="white" fill-rule="nonzero" d="M327.93 79.67c-0.68,0 -1.3,-0.11 -1.87,-0.33 -0.57,-0.22 -1.07,-0.53 -1.49,-0.93 -0.42,-0.4 -0.75,-0.87 -0.99,-1.4 -0.23,-0.54 -0.35,-1.13 -0.35,-1.76 0,-0.64 0.12,-1.24 0.35,-1.77 0.23,-0.53 0.56,-1 0.99,-1.4 0.42,-0.4 0.92,-0.71 1.49,-0.93 0.57,-0.22 1.19,-0.33 1.86,-0.33 0.67,0 1.3,0.11 1.86,0.32 0.57,0.21 1.06,0.52 1.48,0.92 0.42,0.4 0.75,0.87 0.99,1.4 0.23,0.54 0.35,1.13 0.35,1.78 0,0.64 -0.12,1.22 -0.35,1.77 -0.23,0.54 -0.56,1.02 -0.99,1.41 -0.42,0.4 -0.92,0.71 -1.48,0.92 -0.57,0.22 -1.18,0.33 -1.85,0.33l0.01 -0zm-0.01 -1.68c0.38,0 0.74,-0.07 1.06,-0.2 0.32,-0.13 0.6,-0.32 0.85,-0.57 0.24,-0.25 0.44,-0.54 0.57,-0.87 0.13,-0.33 0.2,-0.7 0.2,-1.11 0,-0.41 -0.07,-0.78 -0.2,-1.11 -0.13,-0.33 -0.32,-0.62 -0.57,-0.87 -0.24,-0.25 -0.53,-0.44 -0.85,-0.57 -0.32,-0.13 -0.67,-0.2 -1.06,-0.2 -0.38,0 -0.74,0.07 -1.07,0.2 -0.32,0.13 -0.61,0.33 -0.85,0.57 -0.24,0.25 -0.43,0.54 -0.56,0.87 -0.13,0.33 -0.2,0.7 -0.2,1.11 0,0.41 0.07,0.78 0.2,1.11 0.13,0.33 0.32,0.62 0.56,0.87 0.24,0.25 0.52,0.44 0.85,0.57 0.32,0.13 0.68,0.2 1.07,0.2z"></path>
                <polygon fill="white" fill-rule="nonzero" points="334.09,79.53 334.09,70.96 335.73,70.96 340.78,77.13 339.98,77.13 339.98,70.96 341.94,70.96 341.94,79.53 340.3,79.53 335.24,73.36 336.04,73.36 336.04,79.53 334.08,79.53 "></polygon>
               </g>
              </g>
             </g>
            </g>
        </svg>
        </div>
        <h1 class="hide-on-mobile">Wireless IoT Configuration</h1>
        
        <!-- User Icon Dropdown -->
        <div style="position: relative;">
            <button id="userDropdownBtn" style="background: none; border: none; cursor: pointer; color: white; font-size: 22px; display: flex; align-items: center;">
            <svg xmlns="http://www.w3.org/2000/svg" height="28" width="28" viewBox="0 0 24 24" fill="white"><circle cx="12" cy="8" r="4"/><path d="M12 14c-4.418 0-8 1.79-8 4v2h16v-2c0-2.21-3.582-4-8-4z"/></svg>
            <span style="margin-left: 8px; font-size: 16px;">Admin</span>
            <svg style="margin-left: 4px;" width="16" height="16" fill="white" viewBox="0 0 16 16"><path d="M4.646 6.646a.5.5 0 0 1 .708 0L8 9.293l2.646-2.647a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 0-.708z"/></svg>
            </button>
            <div id="userDropdownMenu" style="display:none; position:absolute; right:0; top:40px; background:#646464; color:#222; min-width:160px; box-shadow:0 2px 8px rgba(0,0,0,0.15); border-radius:6px; z-index:1000;">
            <button onclick="showChangePasswordModal()" style="width:100%;padding:10px 16px;background:none;border:none;text-align:left;cursor:pointer;font-size:15px;">Change Password</button>
            <button onclick="logoutUser()" style="width:100%;padding:10px 16px;background:none;border:none;text-align:left;cursor:pointer;font-size:15px;">Logout</button>
            </div>
        </div>
        <!-- Change Password Modal -->
        <div id="changePasswordModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); z-index:2000; align-items:center; justify-content:center;">
            <div style="background:#cdcdcd; padding:28px 24px 18px 24px; border-radius:8px; min-width:320px; max-width:90vw; box-shadow:0 4px 16px rgba(0,0,0,0.18); position:relative;">
            <h3 style="margin-top:0;">Change Password</h3>
            <form id="changePasswordForm" onsubmit="event.preventDefault(); submitChangePassword();">
            <!-- Hidden username field for accessibility -->
            <input type="text" name="username" id="changePasswordUsername" value="admin" autocomplete="username" style="display:none;" tabindex="-1" aria-hidden="true">
            <div style="margin-bottom:12px;">
            <input id="newPassword" type="password" placeholder="New Password" style="width:100%;padding:8px;margin-bottom:8px;border:1px solid #ccc;border-radius:4px;" required autocomplete="new-password">
            <input id="confirmPassword" type="password" placeholder="Confirm New Password" style="width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;" required autocomplete="new-password">
            </div>
            <div id="changePasswordError" style="color:red; font-size:13px; min-height:18px;"></div>
            <div style="margin-top:10px; display:flex; justify-content:flex-end; gap:8px;">
            <button type="button" onclick="closeChangePasswordModal()" style="padding:6px 14px; background:#ff9f29; border:none; border-radius:4px; cursor:pointer;">Cancel</button>
            <button type="submit" style="padding:6px 14px; background:#2196F3; color:white; border:none; border-radius:4px; cursor:pointer;">Change</button>
            </div>
            </form>
            </div>
        </div>    
        </div>
        <!-- Sidebar Navigation -->

    <button class="sidebar-toggle-main" style="position:fixed;top:18px;left:18px;z-index:101;background:#00101c;border:none;color:#fff;font-size:26px;display:none;" onclick="toggleSidebar()" aria-label="Open menu">
        &#9776;
    </button>
    <nav class="sidebar" id="sidebarNav">
        <div class="sidebar-header">
            <span>Menu</span>
            <button class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Close menu">&times;</button>
        </div>
        <div class="sidebar-menu">
            <button class="sidebar-link active" onclick="showTab('dashboard');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#home_icon"></use></svg>
                Dashboard
            </button>
            <button class="sidebar-link" onclick="showTab('meshConfig');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#mainboard_icon"></use></svg>
                Mesh Network
            </button>
            <button class="sidebar-link" onclick="showTab('modbusConfig');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#modbus_icon"></use></svg>
                Modbus Configuration
            </button>
            <button class="sidebar-link" onclick="showTab('wifiConfig');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#wifi_icon"></use></svg>
                Network Configuration
            </button>
            <button class="sidebar-link" onclick="showTab('mappingData');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#table"></use></svg>
                Mapping Data
            </button>
            <!--
            <button class="sidebar-link" onclick="showTab('loraConfig');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#broadcast_icon"></use></svg>
                LoRa E32 Configuration
            </button>
            <button class="sidebar-link" onclick="showTab('loraRYConfig');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#broadcast_icon"></use></svg>
                LoRa RY Configuration
            </button>
            -->
            <button class="sidebar-link" onclick="showTab('fileManager');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#folder_icon"></use></svg>
                File Manager
            </button>
            <button class="sidebar-link" onclick="showTab('dataViewer');setActiveSidebar(this)">
                <svg class="bi" width="20" height="20"><use xlink:href="#console_icon"></use></svg>
                Data Viewer
            </button>
        </div>
                

        <div class="sidebar-spacer"></div>
        <!-- Reset ESP Button -->
            <button class="sidebar-link" id="resetEspBtn" style="background-color:#ff9800;color:white; margin-bottom: 10px;" onclick="resetEsp()">
                <svg class="bi" width="20" height="20"><use xlink:href="#reload_icon"></use></svg>
                Reset
            </button>
    </nav>
    
    <div id="mappingData" class="tab-content" style=" margin-left: 10px;">
        <h2>Mapping Data</h2>

        <!-- Edit Value Modal -->
        <div id="editValueModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.25); z-index:3000; align-items:center; justify-content:center;">
            <div style="background:#fff; padding:24px 28px; border-radius:10px; box-shadow:0 4px 16px rgba(0,0,0,0.18); min-width:320px; max-width:90vw; position:relative;">
                <h3 style="margin-top:0;">Edit Node Value</h3>
                <div style="margin-bottom: 20px;">
                    <select id="edit_type" style="width:80px;" title="Select type">
                        <option value="coil">Coil</option>
                        <option value="word">Word</option>
                        <option value="dword">DWord</option>
                    </select>
                    <input type="number" id="edit_value" placeholder="value" style="width:100px;" min="0" max="1">
                    <input type="number" id="edit_address" style="width:90px;">
                </div>
                <div style="display:flex; justify-content:flex-end; gap:8px;">
                    <button type="button" onclick="closeEditValueModal()" style="padding:6px 14px; background:#ff9f29; border:none; border-radius:4px; cursor:pointer;">Cancel</button>
                    <button type="button" onclick="sendEditCommand()" style="padding:6px 14px; background:#2196F3; color:white; border:none; border-radius:4px; cursor:pointer;">Send</button>
                </div>
            </div>
        </div>
        <script>
        function openEditValueModal(addressIdx, type, value) {
            // Set address
            // updateEditAddressOptions();
            setTimeout(function() {
                document.getElementById('edit_address').value = addressIdx;
                if (type) document.getElementById('edit_type').value = type.toLowerCase();
                if (typeof value !== "undefined") document.getElementById('edit_value').value = value;
            }, 0);
            document.getElementById('editValueModal').style.display = 'flex';
        }
        function closeEditValueModal() {
            document.getElementById('editValueModal').style.display = 'none';
        }
        // Add click event to nodeDataTables rows
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('nodeDataTables').addEventListener('click', function(e) {
                let tr = e.target.closest('tr');
                if (tr && tr.parentElement.tagName === 'TBODY') {
                    let idx = tr.children[0]?.textContent;
                    let type = tr.children[2]?.textContent;
                    let value = tr.children[3]?.textContent;
                    openEditValueModal(idx, type, value);
                }
            });
        });
        </script>
        <div style="margin-bottom: 20px;">
            <div id="nodeDataTables"></div>
            <!-- Data tables for nodes will be dynamically generated here -->
        </div>
    </div>
        
    <div id="dataViewer" class="tab-content" style=" margin-left: 10px;">
        <h2>Data Viewer</h2>
        <textarea id="dataViewerTextarea" style="width:100%;height:200px;resize:vertical;" placeholder="Enter your data here..."></textarea>
        <div style="margin-top:10px;">
            <button type="button" onclick="saveDataViewer()">Save</button>
            <button type="button" onclick="loadPinMapping()">Load</button>
            <p id="responseMessageViewer" style="margin-top: 20px; color: green;"></p>
        </div>
        
        <div>
            <label for="jsonMappingData" style="display: block; margin-bottom: 10px;">JSON Mapping Data:</label>
            <textarea id="jsonMappingData" name="jsonMappingData" placeholder="Enter JSON data here" style="width: 100%; height: 150px; resize: vertical;"></textarea>
            <textarea id="jsonMappingDatas" name="jsonMappingDatas" placeholder="Enter JSON data here" style=" width: 100%; height: 150px; resize: vertical;"></textarea>
            <button type="button" onclick="saveDataMapping()" >Save Mapping Data</button>
            <button type="button" onclick="loadDataMapping()" >load Mapping Data</button>
            <p id="responseMessageMapping" style="margin-top: 20px; color: green;"></p>

            <button type="button" onclick="submitMappingData()">Submit Mapping Data</button>
            <p id="responseMessageMappings" style="margin-top: 20px; color: green;"></p>
        </div>

        <!-- Pin Mapping Card -->
        <div id="pinMappingCard" style="margin: 30px 0; padding: 18px 22px; border: 1px solid #bbb; border-radius: 10px; background: #f8f8f8; max-width: 600px; display: none;">
            <h2 style="margin-top:0;">Pin Mapping</h2>
            <form id="pinMappingForm">
                <div id="pinMappingFields" style="display: flex; flex-wrap: wrap; gap: 16px 24px;"></div>
                <div style="margin-top: 18px;">
                    <button type="button" onclick="savePinMapping()" style="background:#2196F3;color:white;padding:6px 18px;border:none;border-radius:4px;cursor:pointer;">Save Pin Mapping</button>
                    <button type="button" onclick="loadPinMapping()" style="background:#888;color:white;padding:6px 18px;border:none;border-radius:4px;cursor:pointer;margin-left:8px;">Reload</button>
                    <span id="pinMappingStatus" style="margin-left:16px;color:#2196F3;font-weight:bold;"></span>
                </div>
            </form>
        </div>
        <button type="button" onclick="ResetRom()" style="background:#ff9800;color:white;padding:6px 18px;border:none;border-radius:4px;cursor:pointer;"><svg class="bi" width="20" height="20"><use xlink:href="#reload_icon"></use></svg>ResetRom</button>
        <p id="resetEspResponse"> </p>
    </div>
    
    <div id="loraRYConfig" class="tab-content" style=" margin-left: 10px;">
        <h2>LoRa RY Module Configuration</h2>
        <form id="loraRYConfigForm">
            <div style="margin-bottom: 10px;">
                <label for="LoRaEnable" style="display: inline-block; width: 150px;">Enable LoRa:</label>
                <input type="checkbox" id="LoRaEnable" name="LoRaEnable">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ryMode" style="display: inline-block; width: 150px;">Mode:</label>
                <select id="ryMode" name="ryMode" style="width: 200px;">
                    <option value="0">Transceiver Mode</option>
                    <option value="1">Sleep Mode</option>
                    <option value="2">Smart Power Saving Mode</option>
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ryRxTime" style="display: inline-block; width: 150px;">RX Time (ms):</label>
                <input type="number" id="ryRxTime" name="ryRxTime" placeholder="Enter RX Time" style="width: 200px;" min="30" max="60000">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ryLowSpeedTime" style="display: inline-block; width: 150px;">Low Speed Time (ms):</label>
                <input type="number" id="ryLowSpeedTime" name="ryLowSpeedTime" placeholder="Enter Low Speed Time" style="width: 200px;" min="30" max="60000">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ryBand" style="display: inline-block; width: 150px;">Frequency Band:</label>
                <input type="number" id="ryBand" name="ryBand" placeholder="Enter Frequency (Hz)" style="width: 200px;" min="490000000" max="915000000">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ryPower" style="display: inline-block; width: 150px;">Power Level:</label>
                <input type="number" id="ryPower" name="ryPower" placeholder="Enter Power (dBm)" style="width: 200px;" min="0" max="22">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ryAddress" style="display: inline-block; width: 150px;">Address:</label>
                <input type="number" id="ryAddress" name="ryAddress" placeholder="Enter Address" style="width: 200px;" min="0" max="65535">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ryNetworkId" style="display: inline-block; width: 150px;">Network ID:</label>
                <input type="number" id="ryNetworkId" name="ryNetworkId" placeholder="Enter Network ID" style="width: 200px;" min="3" max="18">
            </div>
            <button type="button" onclick="submitLoRaRYConfig()">Submit</button>
        </form>
            <p id="responseMessageRyConfig" style="margin-top: 20px; color: green;"></p>
    </div>
    <div id="loraConfig" class="tab-content" style=" margin-left: 10px;">
        <h2>LoRa E32 Configuration</h2>
        <form id="loraConfigForm">
            <div style="margin-bottom: 10px;">
                <label for="address" style="display: inline-block; width: 150px;">Address:</label>
                <input type="number" id="address" name="address" placeholder="Enter Address" style="width: 200px;" min="0" max="65535" required>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="uartSpeed" style="display: inline-block; width: 150px;">UART Speed:</label>
                <select id="uartSpeed" name="uartSpeed" style="width: 200px;">
                    <option value="1200_8N1">1200 8N1</option>
                    <option value="2400_8N1">2400 8N1</option>
                    <option value="4800_8N1">4800 8N1</option>
                    <option value="9600_8N1">9600 8N1</option>
                    <option value="19200_8N1">19200 8N1</option>
                    <option value="38400_8N1">38400 8N1</option>
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="airRate" style="display: inline-block; width: 150px;">Air Data Rate:</label>
                <select id="airRate" name="airRate" style="width: 200px;">
                    <option value="0.3kbps">0.3 kbps</option>
                    <option value="1.2kbps">1.2 kbps</option>
                    <option value="2.4kbps">2.4 kbps</option>
                    <option value="4.8kbps">4.8 kbps</option>
                    <option value="9.6kbps">9.6 kbps</option>
                    <option value="19.2kbps">19.2 kbps</option>
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="channel" style="display: inline-block; width: 150px;">Channel:</label>
                <input type="number" id="channel" name="channel" placeholder="Enter Channel" style="width: 200px;" min="0" max="30" required>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="transmissionMode" style="display: inline-block; width: 150px;">Transmission Mode:</label>
                <select id="transmissionMode" name="transmissionMode" style="width: 200px;">
                    <option value="fixed">Fixed</option>
                    <option value="transparent">Transparent</option>
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="pullUp" style="display: inline-block; width: 150px;">Pull Up:</label>
                <input type="checkbox" id="pullUp" name="pullUp">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="fec" style="display: inline-block; width: 150px;">FEC:</label>
                <input type="checkbox" id="fec" name="fec">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="power" style="display: inline-block; width: 150px;">Power Level:</label>
                <select id="power" name="power" style="width: 200px;">
                    <option value="0">1W (30 dBm)</option>
                    <option value="1">500mW (27 dBm)</option>
                    <option value="2">250mW (24 dBm)</option>
                    <option value="3">125mW (21 dBm)</option>
                </select>
            </div>

            <button type="button" onclick="submitLoRaConfig()">Submit</button>
        </form>
            <p id="responseMessageLora" style="margin-top: 20px; color: green;"></p>
    </div>

    <div id="modbusConfig" class="tab-content" style=" margin-left: 10px;">
        <h2>Modbus Configuration</h2>
        <form id="modbusConfigForm">
            <div style="margin-bottom: 10px;">
            <label for="role" style="display: inline-block; width: 150px;">Role:</label>
            <select id="role" name="role" style="width: 200px;">
                <option value="master">Master</option>
                <option value="slave">Slave</option>
            </select>
            </div>

            <div style="margin-bottom: 10px;">
            <label for="com" style="display: inline-block; width: 150px;">Communication (Com):</label>
            <select id="com" name="com" style="width: 200px;">
                <option value="TCP/IP">TCP/IP</option>
                <option value="RS485">RS485</option>
            </select>
            </div>
            
            <div style="margin-bottom: 10px;">
            <label for="id" style="display: inline-block; width: 150px;">Modbus Slave ID:</label>
            <input type="number" id="id" name="id" min="1" max="255" required style="width: 200px;">
            </div>

            <div style="margin-bottom: 10px;">
            <label for="slaveip" style="display: inline-block; width: 150px;">Slave IP:</label>
            <input type="text" id="slaveip" name="slaveip" placeholder="192,168,1,100" required style="width: 200px;">
            </div>
            <button style="background:#2196F3;color:white;padding:6px 18px;border:none;border-radius:4px;cursor:pointer;" onclick="submitConfig()">Submit</button>
        </form>

        <p id="responseMessage" style="margin-top: 20px; color: green;"></p>
        <div style="margin: 30px 0; padding: 18px 22px; border: 1px solid #bbb; border-radius: 10px; background: #f8f8f8; max-width: 600px;">
            <h2 style="margin-top:0;">Create Data Block</h2>
            <!-- <div style="margin-top: 10px; display: flex; gap: 10px; align-items: flex-end;"> -->
                    <br>
                    <div style="margin-bottom: 5px;">
                        <label for="offset" style="display: inline-block; width: 150px;">Address offset:</label>
                        <input title="Address offset" type="number" id="offset" placeholder="Offset" style="width: 70px;">
                        <label for="tagFrom2" style="display: inline-block; width: 150px;">Tag:</label>
                        <input title="Tag" type="number" id="tagFrom2" placeholder="Tag" style="width: 70px;">
                    </div>
                    <div style="margin-bottom: 10px;">
                    </div>    
                    <div style="margin-bottom: 10px;">
                        <label for="valueFrom2" style="display: inline-block; width: 150px;">Value:</label>
                        <input title="Value" type="number" id="valueFrom2" placeholder="Value" style="width: 70px;">
                        <label for="typeFrom2" style="display: inline-block; width: 150px;">Type:</label>
                        <select title="Type" id="typeFrom2" style="width: 70px;">
                            <option value="0">Coil</option>
                            <option value="1">Word</option>
                            <option value="2">DWord</option>
                        </select>
                    </div>    
                    <div style="margin-bottom: 10px;">
                    </div>    
                    <div style="margin-bottom: 10px;">
                        <label for="amount" style="display: inline-block; width: 150px;">Amount:</label>
                        <input title="Amount" ype="number" id="amount" placeholder="Amount" style="width: 70px;">
                    </div>    
                <!-- </div> -->
                 <br>
                <!-- <button type="button" onclick="addRangeAmount()">Add Row (Amount)</button> -->
                <button type="button" onclick="addDataBlock()" title="Refresh file list" style="float:right; margin-left:10px; background:#ff9b0e; color:rgb(0, 0, 0); border:none; border-radius:4px; padding:6px 12px; cursor:pointer; display:inline-flex; align-items:center;">
                <svg class="bi" width="24" height="24"><use xlink:href="#add_app_icon"></use></svg> Add Data Block</button>
                <div id = "sentDataBlock" style="display: none;">
                <button type="button" onclick="sendDataBlocks(${idx})" style="margin-left:10px; background:#00ff95; color:rgb(0, 0, 0); border:none; border-radius:4px; padding:6px 12px; cursor:pointer; display:inline-flex; align-items:center;">
                    <svg class="bi" width="24" height="24"><use xlink:href="#upload_icon"></use></svg>Update Data Blocks
                </button>
        </div>
        </div>
        
        <div id="dataBlockCards" style="margin-top: 15px; display: flex; flex-wrap: wrap; gap: 10px;"></div>

        <div class="d-flex justify-content-between border-vplab-light border-bottom" style="color:rgb(49, 49, 49)">
            <div class="p-2">Single address</div>
            <!-- trash -->
            <span><div onclick="addRow()" class="p-2"><svg class="bi" width="24" height="24"><use xlink:href="#add_app_icon"></use></svg></div></span>
        </div>
        <hr>
        <div style="margin-bottom: 10px;">
            <table id="tagsTable">
                <thead>
                    <tr>
                        <th>Tag</th>
                        <th>Offset</th>
                        <th>Value</th>
                        <th>Type</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" name="tags[]" placeholder="1101" style="width: 50px;" required></td>
                        <td><input type="text" name="Offset[]" placeholder="0"  style="width: 50px;" required></td>
                        <td><input type="text" name="values[]" placeholder="164" style="width: 50px;" required></td>
                        <td><input type="text" name="types[]" placeholder="2" style="width: 50px;" required></td>
                        <td>
                            <button type="button" onclick="deleteRow(this)" style="margin-left:10px; background:#ff0000; color:rgb(155, 155, 155); border:none; border-radius:4px; padding:6px 12px; cursor:pointer; display:inline-flex; align-items:center;">
                                <svg class="bi" width="16" height="16"><use xlink:href="#trash"></use></svg>
                            </button>
                        </td></svg>
                    </tr>
                </tbody>
            </table>

        </div>
        
    </div>

    <div id="fileManager" class="tab-content"  style=" margin-left: 10px;">
        <div style="margin: 30px 0; padding: 18px 22px; border: 1px solid #bbb; border-radius: 10px; background: #f8f8f8; max-width: 800px;">
            <h2 style="margin-top:0;">File Manager</h2>
            <!-- Sub-tabs for File System and SD Card -->
            <div style="display: flex; border-bottom: 2px solid #ddd; margin-bottom: 18px;">
                <div id="fsTab" class="file-subtab active" onclick="showFileSubTab('fs')" style="padding: 10px 24px; cursor: pointer; border: 1px solid #3d3d3d; border-bottom: none; background: #fff;">
                        <svg class="bi" width="24" height="24" style="vertical-align:middle;margin-right:6px;">
                            <use xlink:href="#hdd_icon"></use>
                        </svg>
                    File System</div>
                <div id="sdTab" class="file-subtab" onclick="showFileSubTab('sd')" style="padding: 10px 24px; cursor: pointer; border: 1px solid #3d3d3d; border-bottom: none; background: #f9f9f9;">
                    <svg class="bi" width="24" height="24" style="vertical-align:middle;margin-right:6px;">
                        <use xlink:href="#sd_card_icon"></use>
                    </svg>
                    SD Card</div>
            </div>
            <!-- File System Tab Content -->
            <div id="fsTabContent" class="file-tab-content" style="display: block;">
                <div class="file-list">
                    <div class="upload-section">
                        <h3 style="display:inline-block;margin-right:12px;"></h3>
                        <button type="button" onclick="fetchFileList()" title="Refresh file list" style="float:right; margin-left:10px; background:#2196F3; color:white; border:none; border-radius:4px; padding:6px 12px; cursor:pointer; display:inline-flex; align-items:center;">
                            <svg class="bi" width="20" height="20" style="margin-right:4px;"><use xlink:href="#reload_icon"></use></svg>
                            Refresh
                        </button>
                        <input type="file" id="fileInput">
                        <button onclick="showUploadModal();uploadFile()" style="background:#00ffdd;color:rgb(0, 0, 0);border:none;border-radius:4px;padding:6px 12px;cursor:pointer;display:inline-flex;align-items:center;">
                            <svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
                                <g transform="translate(50,1200) scale(1, -1)">
                                <path fill="currentColor" d="M583 1182l378 -435q14 -15 9 -31t-26 -16h-244v-250q0 -20 -17 -35t-39 -15h-200q-20 0 -32 14.5t-12 35.5v250h-250q-20 0 -25.5 16.5t8.5 31.5l383 431q14 16 33.5 17t33.5 -14zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z">
                                </path>
                                </g>
                            </svg>Upload
                        </button>
                    </div>
                    <!-- Upload Loading Modal -->
                    <div id="uploadModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.25); z-index:3000; align-items:center; justify-content:center;">
                        <div style="background:#fff; padding:32px 40px; border-radius:10px; box-shadow:0 4px 16px rgba(0,0,0,0.18); display:flex; flex-direction:column; align-items:center;">
                            <div class="loader" style="border:6px solid #eee; border-top:6px solid #2196F3; border-radius:50%; width:48px; height:48px; animation:spin 1s linear infinite;"></div>
                            <div style="margin-top:18px; font-size:18px;">Uploading...</div>
                        
                            <!-- Upload Progress Bar -->
                            <div id="uploadProgressBar" style="width:320px;height:18px;background:#eee;border-radius:6px;margin:16px auto;overflow:hidden;position:relative;display:none;">
                                <div id="uploadProgressInner" style="height:100%;width:0%;background:#2196F3;border-radius:6px;transition:width 0.2s;"></div>
                                <span id="uploadProgressText" style="position:absolute;left:50%;top:0;transform:translateX(-50%);color:#333;font-size:13px;">0%</span>
                            </div>
                        </div>
                    </div>
                    <style>
                        @keyframes spin {
                            0% { transform: rotate(0deg);}
                            100% { transform: rotate(360deg);}
                        }
                    </style>
                </div>
                <div id="capInfo" style="margin-left: 30px;"> </div>
                <table>
                    <thead>
                        <tr>
                            <th>File Name</th>
                            <th>Size</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="fileList"></tbody>
                </table>
            </div>
            <!-- SD Card Tab Content -->
            <div id="sdTabContent" class="file-tab-content" style="display: none;">
                <div class="file-list">
                    <div class="upload-section">
                        <h3 style="display:inline-block;margin-right:12px;"></h3>   
                        <button type="button" onclick="fetchSDFileList()" title="Refresh file list" style="float:right; margin-left:10px; background:#2196F3; color:white; border:none; border-radius:4px; padding:6px 12px; cursor:pointer; display:inline-flex; align-items:center;">
                            <svg class="bi" width="20" height="20" style="margin-right:4px;"><use xlink:href="#reload_icon"></use></svg>
                            Refresh
                        </button>
                        <input type="file" id="sdFileInput">
                        <button onclick="showUploadModal();uploadSDFile()" style="background:#00ffdd;color:rgb(0, 0, 0);border:none;border-radius:4px;padding:6px 12px;cursor:pointer;display:inline-flex;align-items:center;">
                            <svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
                                <g transform="translate(50,1200) scale(1, -1)">
                                <path fill="currentColor" d="M583 1182l378 -435q14 -15 9 -31t-26 -16h-244v-250q0 -20 -17 -35t-39 -15h-200q-20 0 -32 14.5t-12 35.5v250h-250q-20 0 -25.5 16.5t8.5 31.5l383 431q14 16 33.5 17t33.5 -14zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z">
                                </path>
                                </g>
                            </svg>Upload
                        </button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>File Name</th>
                            <th>Size</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="sdFileList"></tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="dashboard" class="tab-content active">
        <div style="display: flex; gap: 20px;">
            <!-- Dashboard Card -->
            <div style="flex: 2; border: 1px solid #ddd; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);height: 750px; margin-left: 10px;">
                <div id="Dashboard" style="display: flex; flex-wrap: wrap; gap: 20px;">
                </div>
                <div id="nodeDashboard" style="display: flex; flex-wrap: wrap; gap: 20px;">
                </div>
            </div>
        </div>
    </div>

    <div id="meshConfig" class="tab-content" style=" margin-left: 10px;">
        <div style="display: flex; gap: 20px;">
            <!-- Configuration Card -->
            <div style="flex: 1; border: 1px solid #ddd; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                <h2>Mesh Network Configuration</h2>
                <form id="meshConfigForm">
                    <div style="margin-bottom: 10px;">
                        <label for="boardModel" style="display: inline-block; width: 150px;">Board Model:</label>
                        <select id="boardModel" name="boardModel" style="width: 200px;">
                            <option value="0">Board Custom Model</option>
                            <option value="1">Board ModRTUMesh</option>
                            <option value="2">Board 410WER</option>
                            <option value="3">Board LklineGw</option>
                            <option value="4">Board LklineNode</option>
                            <option value="5">Board 0404WER</option>
                            <option value="6">Board S3SDCWER</option>
                            <option value="7">Board S3SDCWE</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="MeshEnable" style="display: inline-block; width: 150px;">Mesh enable:</label>
                        <input type="checkbox" id="MeshEnable" name="MeshEnable">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="debug" style="display: inline-block; width: 150px;">Debug:</label>
                        <input type="checkbox" id="debug" name="debug">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="loraEnb" style="display: inline-block; width: 150px;">LoRa enable:</label>
                        <input type="checkbox" id="loraEnb" name="loraEnb">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="buzzEnb" style="display: inline-block; width: 150px;">Buzzer enable:</label>
                        <input type="checkbox" id="buzzEnb" name="buzzEnb">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="brokerAddress" style="display: inline-block; width: 150px;">Broker MAC Address:</label>
                        <input type="text" id="brokerAddress" name="brokerAddress" placeholder="FF:FF:FF:FF:FF:FF" style="width: 200px;">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="wifiChannel" style="display: inline-block; width: 150px;">WiFi Channel:</label>
                        <select id="wifiChannel" name="wifiChannel" style="width: 200px;">
                            <option value="1">Channel 1</option>
                            <option value="2">Channel 2</option>
                            <option value="3">Channel 3</option>
                            <option value="4">Channel 4</option>
                            <option value="5">Channel 5</option>
                            <option value="6">Channel 6</option>
                            <option value="7">Channel 7</option>
                            <option value="8">Channel 8</option>
                            <option value="9">Channel 9</option>
                            <option value="10">Channel 10</option>
                            <option value="11">Channel 11</option>
                            <option value="12">Channel 12</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="nodeId" style="display: inline-block; width: 150px;">Node ID:</label>
                        <input type="number" id="nodeId" name="nodeId" placeholder="Enter Node ID" style="width: 200px;">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="netId" style="display: inline-block; width: 150px;">Network ID:</label>
                        <input type="number" id="netId" name="netId" placeholder="Enter Network ID" style="width: 200px;">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="meshrole" style="display: inline-block; width: 150px;">Role:</label>
                        <select id="meshrole" name="meshrole" style="width: 200px;">
                            <option value="Broker">Broker</option>
                            <option value="Node">Node</option>
                            <option value="Repeater">Repeater</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="macSlaves" style="display: inline-block; width: 150px;">Slave MAC Addresses:</label>
                        <input type="text" id="macSlaves" name="macSlaves" placeholder="Comma-separated MACs" style="width: 200px;">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="classDataRequest" style="display: inline-block; width: 150px;">Class Data Request:</label>
                        <select id="classDataRequest" name="classDataRequest" style="width: 200px;">
                            <option value="A">Class A</option>
                            <option value="B">Class B</option>
                            <option value="C">Class C</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="communicationTime" style="display: inline-block; width: 150px;">Communication Time (ClassB):</label>
                        <input type="number" id="communicationTime" name="communicationTime" placeholder="Enter Time (ms)" style="width: 200px;" min="0">
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="dataVersion" style="display: inline-block; width: 150px;">Data Version:</label>
                        <select id="dataVersion" name="dataVersion" style="width: 200px;">
                            <option value="0">Lookline v1</option>
                            <option value="1">Lookline v2</option>
                            <option value="2">Modbus Register</option>
                            <option value="3">Serial TTL</option>
                            <option value="4">LightControl</option>
                        </select>
                    </div>
                </form>
                    <button type="button" onclick="submitMeshConfig()">Submit</button>
                    <p id="responseMessageMesh" style="margin-top: 20px; color: green;"></p>
                <span id="resetEspResponse" style="margin-left:10px;color:#2196F3;font-weight:bold;"></span>
            </div>
        </div>
    </div>
    <div id="wifiConfig" class="tab-content" style=" margin-left: 10px;">
        <h2>Wifi Configuration</h2>
        <!-- <form id="wifiConfigForms"> -->

            <div style="margin-bottom: 10px; margin-left: 10px;">
                <label for="wifiMode" style="display: inline-block; width: 150px;">WiFi Mode:</label>
                <select id="wifiMode" name="wifiMode" style="width: 200px;">
                    <option value="STA">Station (STA)</option>
                    <option value="AP">Access Point (AP)</option>
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ssid" style="display: inline-block; width: 150px;">SSID:</label>
                <input type="text" id="ssid" name="ssid" placeholder="Enter SSID" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="password" style="display: inline-block; width: 150px;">Password:</label>
                <input type="password" id="password" name="password" placeholder="Enter Password" style="width: 200px;">
            </div>
            <h2>MQTT Configuration</h2>
            <div style="margin-bottom: 10px;">
                <label for="mqttEnable" style="display: inline-block; width: 150px;">Enable MQTT:</label>
                <input type="checkbox" id="mqttEnable" name="mqttEnable">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttHost" style="display: inline-block; width: 150px;">MQTT Host:</label>
                <input type="text" id="mqttHost" name="mqttHost" placeholder="Enter MQTT Host" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttPort" style="display: inline-block; width: 150px;">MQTT Port:</label>
                <input type="number" id="mqttPort" name="mqttPort" placeholder="Enter MQTT Port" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttUser" style="display: inline-block; width: 150px;">MQTT User:</label>
                <input type="text" id="mqttUser" name="mqttUser" placeholder="Enter MQTT User" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttPass" style="display: inline-block; width: 150px;">MQTT Password:</label>
                <input type="password" id="mqttPass" name="mqttPass" placeholder="Enter MQTT Password" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="conId" style="display: inline-block; width: 150px;">Connection ID:</label>
                <input type="text" id="conId" name="conId" placeholder="Enter Connection ID" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="topicPush" style="display: inline-block; width: 150px;">Topic Push:</label>
                <input type="text" id="topicPush" name="topicPush" placeholder="Enter Topic Push" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="topicSub" style="display: inline-block; width: 150px;">Topic Subscribe:</label>
                <input type="text" id="topicSub" name="topicSub" placeholder="Enter Topic Subscribe" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttKeepAlive" style="display: inline-block; width: 150px;">MQTT Keep Alive:</label>
                <input type="number" id="mqttKeepAlive" name="mqttKeepAlive" placeholder="Enter Keep Alive" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttCleanSession" style="display: inline-block; width: 150px;">Clean Session:</label>
                <input type="checkbox" id="mqttCleanSession" name="mqttCleanSession">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttQos" style="display: inline-block; width: 150px;">MQTT QoS:</label>
                <select id="mqttQos" name="mqttQos" style="width: 200px;">
                    <option value="0">QoS 0</option>
                    <option value="1">QoS 1</option>
                    <option value="2">QoS 2</option>
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttLwtTopic" style="display: inline-block; width: 150px;">MQTT Retain:</label>
                <input type="checkbox" id="mqttRetain" name="mqttRetain">
            </div>
         </br>
            <div style="margin-bottom: 10px;">
                <label for="mqttLwtTopic" style="display: inline-block; width: 150px;">LWT Topic:</label>
                <input type="text" id="mqttLwtTopic" name="mqttLwtTopic" placeholder="Enter LWT Topic" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttLwtMessage" style="display: inline-block; width: 150px;">LWT Message:</label>
                <input type="text" id="mqttLwtMessage" name="mqttLwtMessage" placeholder="Enter LWT Message" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttLwtQos" style="display: inline-block; width: 150px;">LWT QoS:</label>
                <select id="mqttLwtQos" name="mqttLwtQos" style="width: 200px;">
                    <option value="0">QoS 0</option>
                    <option value="1">QoS 1</option>
                    <option value="2">QoS 2</option>
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttLwtRetain" style="display: inline-block; width: 150px;">LWT Retain:</label>
                <input type="checkbox" id="mqttLwtRetain" name="mqttLwtRetain">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="mqttLwtEnabled" style="display: inline-block; width: 150px;">LWT Enabled:</label>
                <input type="checkbox" id="mqttLwtEnabled" name="mqttLwtEnabled">
            </div>
            </br>
            <hr style="margin: 20px 0; border: 1px solid #ddd;">
            <h2>Time</h2>
            <div style="margin-bottom: 10px;">
                <label for="timezone" style="display: inline-block; width: 150px;">Timezone:</label>
                <select id="timezone" name="timezone" style="width: 200px;">
                    <option value="0">UTC</option>
                    <option value="1">UTC+1</option>
                    <option value="2">UTC+2</option>
                    <option value="3">UTC+3</option>
                    <option value="4">UTC+4</option>
                    <option value="5">UTC+5</option>
                    <option value="6">UTC+6</option>
                    <option value="7">UTC+7</option>
                    <option value="8">UTC+8</option>
                    <option value="9">UTC+9</option>
                    <option value="10">UTC+10</option>
                    <option value="11">UTC+11</option>
                    <option value="12">UTC+12</option>
                    <option value="-1">UTC-1</option>
                    <option value="-2">UTC-2</option>
                    <option value="-3">UTC-3</option>
                    <option value="-4">UTC-4</option>
                    <option value="-5">UTC-5</option>
                    <option value="-6">UTC-6</option>
                    <option value="-7">UTC-7</option>
                    <option value="-8">UTC-8</option>
                    <option value="-9">UTC-9</option>
                    <option value="-10">UTC-10</option>
                    <option value="-11">UTC-11</option>
                    <option value="-12">UTC-12</option>
                </select>
            </div>
            <button type="submit" onclick="submitWiFiMQTTConfig()">Update</button>
            
        <!-- </form> -->
        <p id="responseMessageWifi" style="margin-top: 20px; color: green;"></p>
        <hr style="margin: 20px 0; border: 1px solid #ddd;">
            <h2>Ethernet Settings</h2>
            <div style="margin-bottom: 10px;">
                <label for="ethDhcp" style="display: inline-block; width: 150px;">DHCP Enable:</label>
                <input type="checkbox" id="ethDhcp" name="ethDhcp">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ethIp" style="display: inline-block; width: 150px;">IP Address:</label>
                <input type="text" id="ethIp" name="ethIp" placeholder="192.168.1.100" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ethSubnet" style="display: inline-block; width: 150px;">Subnet Mask:</label>
                <input type="text" id="ethSubnet" name="ethSubnet" placeholder="255.255.255.0" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ethGateway" style="display: inline-block; width: 150px;">Gateway:</label>
                <input type="text" id="ethGateway" name="ethGateway" placeholder="192.168.1.1" style="width: 200px;">
            </div>
            <div style="margin-bottom: 10px;">
                <label for="ethDns" style="display: inline-block; width: 150px;">DNS:</label>
                <input type="text" id="ethDns" name="ethDns" placeholder="8.8.8.8" style="width: 200px;">
            </div>

            <div style="margin-bottom: 10px;">
                <button type="button" onclick="saveEthernetConfig()">Save Ethernet Settings</button>
                <button type="button" onclick="loadEthernetConfig()">Reload Ethernet Settings</button>
                    <p id="responseMessageEther" style="margin-top: 20px; color: green;"></p>
            </div>
            <hr style="margin: 20px 0; border: 1px solid #ddd;">
    </div>
    <script>
        const ESP32_PINS = [
        -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48
        ];
        // -1: Not used, 0..48: ESP32 pins

        const PIN_LABELS = [
        "BUZZ", "SETUP_BUTTON", "LED_STT", "I2C_SDA", "I2C_SCL", "Y8", "Y9", "DA0", "DA1",
        "InPut0", "InPut1", "InPut2", "InPut3", "InPut4",
        "Ser_1RX", "Ser_1TX", "M0_PIN", "M1_PIN", "CS_PIN", "RST_PIN", "INIT_PIN",
        "Ser_2RX", "Ser_2TX", "MOSI_PIN", "MISO_PIN", "SCK_PIN", "SD_CS_PIN"
        ];

        var socketstate = false;
        var updateOnce = true;
        // var gateway = `ws://192.168.1.2/ws`;
        var gateway = `ws://${window.location.hostname}/ws`;
        var websocket;
        window.addEventListener('load', onLoad);

        function initWebSocket() {
            console.log('Trying to open a WebSocket connection...');
            websocket = new WebSocket(gateway);
            websocket.onopen    = onOpen;
            websocket.onclose   = onClose;
            websocket.onmessage = onMessage; // <-- add this line
            websocket.onerror = onerror;
        }
        
        function onerror(event) {
            // console.error('WebSocket error:', event);
            // updateSocketStatus(false);
            // socketstate = false;
            // setTimeout(initWebSocket, 2000);
        }
        function onOpen(event) {
            console.log('WebSocket connection established.');
            updateSocketStatus(true);
            socketstate = true;
            websocket.send(JSON.stringify({ type: 'subscribe', topic: 'nodeDashboard' }));
            // setInterval(() => {
            //     if (websocket.readyState === WebSocket.OPEN) websocket.send('ping');
            // }, 20000);
        }

        function onLoad(event) {
            initWebSocket();
        }        // Call loadWiFiMQTTConfig when the page loads

        window.onload = function () {
            loadPinMapping();
            loadWiFiMQTTConfig();
            loadMeshConfig();
            fetchFileList();
            try {
                fetch('/datablocks').then(r=>r.json()).then(showBlocksFromJson);
            } catch (error) {
                console.error('Error fetching datablocks:', error);
            }
            // Fetch configuration from ESP on page load
            try {
                fetch('/load-modbus-config')
                .then(response => response.json())
                .then(data => updateFormFromESP(data))
                .catch(error => console.error('Error fetching configuration from ESP:', error));
            } catch (error) {
                console.error('Error loading Ethernet config:', error);
            }
            
            // loadLoRaRYConfig();
            // loadDataMapping();
            

            // loadNodeDashboard();
            
                // Initial call
                updateEditAddressOptions();
        };

        function onClose(){
            console.log('WebSocket connection closed.');
            updateSocketStatus(false);
            socketstate = false;
            setTimeout(initWebSocket, 2000);
        }

        function onMessage(event){
                // console.log('Received:', event.data);
            if((event.data[0] == '[' || event.data[0] == '{') && event.data != "undefined"){
                const data = JSON.parse(event.data);
                // console.log('Received data:', data);
                loadNodeDashboard(event.data);
                document.getElementById('jsonMappingData').value = event.data;
                if (typeof data === 'object' ){
                    if ( data.ResetRom === 'ok') {
                        document.getElementById('resetEspResponse').textContent = "ROM reset successful!";
                    } else if (data.status) {
                        document.getElementById('resetEspResponse').textContent = data.status;
                    } else if (data.error) {
                        document.getElementById('resetEspResponse').textContent = 'Error: ' + data.error;
                    }
                }
            }
        };
            
        // Update both text and icon color
        function updateSocketStatus(connected) {
            let icon = document.getElementById('socketStatusSvg');
            if (icon) {
                icon.querySelector('circle').setAttribute('fill', connected ? 'green' : 'red');
            }
        }
        // Sidebar show/hide logic
        function toggleSidebar() {
            var sidebar = document.getElementById('sidebarNav');
            var isMobile = window.innerWidth <= 900;
            if (isMobile) {
                if (sidebar.classList.contains('show')) {
                    sidebar.classList.remove('show');
                    document.body.classList.remove('sidebar-open');
                } else {
                    sidebar.classList.add('show');
                    document.body.classList.add('sidebar-open');
                }
            }
        }
        // Hide sidebar on click outside (mobile)
        document.addEventListener('click', function(e) {
            var sidebar = document.getElementById('sidebarNav');
            var isMobile = window.innerWidth <= 900;
            if (isMobile && sidebar.classList.contains('show')) {
                if (!sidebar.contains(e.target) && !e.target.classList.contains('sidebar-toggle-main')) {
                    sidebar.classList.remove('show');
                    document.body.classList.remove('sidebar-open');
                }
            }
        });
        // Set active sidebar link
        function setActiveSidebar(btn) {
            document.querySelectorAll('.sidebar-link').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            // Hide sidebar on mobile after click
            if (window.innerWidth <= 900) {
                document.getElementById('sidebarNav').classList.remove('show');
                document.body.classList.remove('sidebar-open');
            }
        }
        // On tab switch, sync sidebar highlight
        function showTab(tabId) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            document.querySelector(`#${tabId}`).classList.add('active');
            // Highlight sidebar
            let sidebarBtns = document.querySelectorAll('.sidebar-link');
            sidebarBtns.forEach(btn => {
                if (btn.textContent.trim() === document.querySelector(`.tab[onclick="showTab('${tabId}')"]`)?.textContent?.trim()) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        function showUploadModal() {
            document.getElementById('uploadModal').style.display = 'flex';
        }
        function hideUploadModal() {
            document.getElementById('uploadModal').style.display = 'none';
        }
        
        function ResetRom(){
            if (confirm('Are you sure you want to reset the ROM? This will erase all data!')) {
                websocket.send(JSON.stringify({ cmnd: 'ResetRom' }));
            }
        }
        function submitMappingData() {
            const jsonData = document.getElementById('jsonMappingData').value;
            loadNodeDashboard(jsonData);
            try {
                const parsedData = JSON.parse(jsonData);
                console.log('Submitting Mapping Data:', parsedData);

                // fetch('/submit-mapping-data', {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json'
                //     },
                //     body: JSON.stringify(parsedData)
                // })
                // .then(response => response.json())
                // .then(data => {
                //     console.log('Response from server:', data);
                //     alert(data.status || 'Mapping data submitted successfully!');
                // })
                // .catch(error => console.error('Error submitting mapping data:', error));
            } catch (error) {
                alert('Invalid JSON format. Please correct it and try again.');
                console.error('JSON Parsing Error:', error);
            }
        }

        function saveDataViewer() {
            const data = document.getElementById('dataViewerTextarea').value;
            fetch('/save-data-viewer', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ data })
            })
            .then(response => response.json())
            .then(res => alert(res.status || 'Data saved!'))
            .catch(err => alert('Save failed: ' + err));
        }

        // function loadDataViewer() {
        //     try{
        //         fetch('/load-data-viewer')
        //         .then(response => response.json())
        //         .then(res => {
        //             document.getElementById('dataViewerTextarea').value = res.data || '';
        //         })
        //         .catch(err => alert('Load failed: ' + err));
        //     } catch (error) {
        //         console.error('Error loading data viewer:', error);
        //     }
        // }

    function renderPinMappingFields(pinMap) {
        const container = document.getElementById('pinMappingFields');
        container.innerHTML = '';
        PIN_LABELS.forEach(label => {
            const value = (pinMap && typeof pinMap[label] !== 'undefined') ? pinMap[label] : -1;
            const fieldDiv = document.createElement('div');
            fieldDiv.style.display = 'flex';
            fieldDiv.style.flexDirection = 'column';
            fieldDiv.style.minWidth = '120px';
            fieldDiv.innerHTML = `
                <label style="font-size:13px;font-weight:600;margin-bottom:3px;" for="pin_${label}">${label}</label>
                <select id="pin_${label}" name="${label}" style="padding:4px 8px;">
                    ${ESP32_PINS.map(pin =>
                        `<option value="${pin}" ${pin == value ? 'selected' : ''}>${pin === -1 ? 'Not used' : pin}</option>`
                    ).join('')}
                </select>
            `;
            container.appendChild(fieldDiv);
        });
    }

    function loadPinMapping() {
        fetch('/load-data-viewer')
            .then(r => r.json())
            .then(res => {
                let pinMap = {};
                try {
                    pinMap = typeof res.data === 'string' ? JSON.parse(res.data) : res.data;
                } catch (e) { pinMap = {}; }
                renderPinMappingFields(pinMap);
                document.getElementById('dataViewerTextarea').value = res.data || '';
                document.getElementById('pinMappingStatus').textContent = 'Loaded!';
                setTimeout(()=>{document.getElementById('pinMappingStatus').textContent='';}, 1200);
            })
            .catch(() => {
                renderPinMappingFields({});
                document.getElementById('pinMappingStatus').textContent = 'Load failed!';
            });
    }

    function savePinMapping() {
        const form = document.getElementById('pinMappingForm');
        const pinMap = {};
        PIN_LABELS.forEach(label => {
            pinMap[label] = parseInt(form['pin_' + label].value);
        });
        fetch('/save-data-viewer', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ data: JSON.stringify(pinMap) })
        })
        .then(r => r.json())
        .then(res => {
            document.getElementById('pinMappingStatus').textContent = res.status || 'Saved!';
            setTimeout(()=>{document.getElementById('pinMappingStatus').textContent='';}, 1200);
        })
        .catch(() => {
            document.getElementById('pinMappingStatus').textContent = 'Save failed!';
        });
    }

    // Initial load
    // document.addEventListener('DOMContentLoaded', loadPinMapping);

        function addRow() {
            const table = document.getElementById('tagsTable').getElementsByTagName('tbody')[0];
            const rowCount = table.rows.length;

            if (rowCount >= 120) {
                alert('Maximum of 120 rows allowed.');
                return;
            }

            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="number" name="tags[]" placeholder="1101" style="width: 50px;" required></td>
                <td><input type="number" name="Offset[]" placeholder="164" style="width: 50px;" required></td>
                <td><input type="number" name="values[]" placeholder="164" style="width: 50px;" required></td>
                <td><input type="number" name="types[]" placeholder="2" style="width: 50px;" required></td>
                <td><button type="button" onclick="deleteRow(this)" style="margin-left:10px; background:#ff0000; color:rgb(155, 155, 155); border:none; border-radius:4px; padding:6px 12px; cursor:pointer; display:inline-flex; align-items:center;">
                        <svg class="bi" width="16" height="16"><use xlink:href="#trash"></use></svg>
                    </button></td>
            `;
        }
        
        function deleteRow(button) {
            const row = button.parentElement.parentElement;
            row.parentElement.removeChild(row);
        }
        // Store blocks in memory
        let dataBlocks = [];

        function addDataBlock() {
            const offset = parseInt(document.getElementById('offset').value);
            const tagFrom = parseInt(document.getElementById('tagFrom2').value);
            const valueFrom = parseInt(document.getElementById('valueFrom2').value);
            const typeFrom = parseInt(document.getElementById('typeFrom2').value);
            const amount = parseInt(document.getElementById('amount').value);

            if (
                isNaN(tagFrom) || isNaN(valueFrom) || isNaN(typeFrom) ||
                isNaN(amount) || amount <= 0
            ) {
                alert('Please enter all From values and a valid amount.');
                return;
            }else{
                document.getElementById("sentDataBlock").style.display = "block";
            }

            // Create block object
            const block = {
                offset,
                tagFrom,
                valueFrom,
                typeFrom,
                amount
            };
            dataBlocks.push(block);
            renderDataBlockCards();
        }

        function renderDataBlockCards() {
            const container = document.getElementById('dataBlockCards');
            container.innerHTML = '';
            dataBlocks.forEach((block, idx) => {
                const card = document.createElement('div');
                card.style.border = '1px solid #aaa';
                card.style.borderRadius = '6px';
                card.style.padding = '10px';
                card.style.background = '#f9f9f9';
                card.style.minWidth = '180px';
                card.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <strong>Block ${idx + 1}</strong>
                        <button type="button" onclick="removeDataBlock(${idx})" style="margin-left:10px; background:#ff0000; color:rgb(155, 155, 155); border:none; border-radius:4px; padding:6px 12px; cursor:pointer; display:inline-flex; align-items:center;">
                            <svg class="bi" width="16" height="16"><use xlink:href="#trash"></use></svg>
                        </button>
                    </div>
                    <br>
                    Address offset: ${block.offset}<br>
                    Tag From: ${block.tagFrom}<br>
                    Value From: ${block.valueFrom}<br>
                    Type From: ${block.typeFrom}<br>
                    Amount: ${block.amount}<br>
                `;
                container.appendChild(card);
            });
        }

        function removeDataBlock(idx) {
            dataBlocks.splice(idx, 1);
            renderDataBlockCards();
        }

        function sendDataBlocks() {
            // Add blocks to a JSON object and send to API
            const payload = { block: dataBlocks };
            fetch('/save-datablocks', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            })
            .then(res => res.json())
            .then(data => alert(data.status || 'Data blocks sent!'))
            .catch(err => alert('Send failed: ' + err));
        }

        // Show cards when loading JSON
        function showBlocksFromJson(json) {
            try {
                const obj = typeof json === 'string' ? JSON.parse(json) : json;
                if (obj.block && Array.isArray(obj.block)) {
                    dataBlocks = obj.block;
                    renderDataBlockCards();
                }
            } catch (e) {
                // ignore
            }
        }
        // Sub-tab switching logic
        function showFileSubTab(tab) {
            document.getElementById('fsTab').classList.remove('active');
            document.getElementById('sdTab').classList.remove('active');
            document.getElementById('fsTabContent').style.display = 'none';
            document.getElementById('sdTabContent').style.display = 'none';
            if (tab === 'fs') {
                document.getElementById('fsTab').classList.add('active');
                document.getElementById('fsTabContent').style.display = 'block';
            } else {
                document.getElementById('sdTab').classList.add('active');
                document.getElementById('sdTabContent').style.display = 'block';
            }
        }

        // Fetch and display the list of files
        function fetchFileList() {
            fetch('/list-files')
            .then(response => response.json())
            .then(data => {
                // Support both {files:[], info:{}} and {files:[], used_kb, free_kb}
                const files = data.files || [];
                const info = data.info || {};
                const usedKb = info.used_kb ?? data.used_kb ?? 0;
                const freeKb = info.free_kb ?? data.free_kb ?? 0;
                const totalKb = info.total_kb ?? (usedKb + freeKb);
                const percentUsed = totalKb > 0 ? Math.round((usedKb / totalKb) * 100) : 0;

                // Progress Bar
                let progressHtml = `
                    <div style="margin-left: 40px;margin-bottom:10px;">
                    <div style="font-size:14px;padding:6px 20px">
                        <b>Used:</b> ${usedKb} KB &nbsp; 
                        <b>Free:</b> ${freeKb} KB &nbsp; 
                        <b>Total:</b> ${totalKb} KB
                    </div>
                    <div style="background:#eee; border-radius:6px; height:18px; width:320px;margin-left: 30px; margin-top:6px; box-shadow:0 1px 2px #ccc inset;">
                        <div style="background:#2196F3; height:100%; width:${percentUsed}%; border-radius:6px; transition:width 0.4s;"></div>
                    </div>
                    <div style="margin-left: 30px;font-size:13px; color:#555; margin-top:2px;">${percentUsed}% used</div>
                    </div>
                `;
                // Insert progress bar above file list
                const Capinfo = document.getElementById('capInfo');
                Capinfo.innerHTML = '';
                // Remove any previous progress bar
                const prev = Capinfo.parentElement.querySelector('.fs-progress-bar');
                if (prev) prev.remove();
                const wrapper = document.createElement('div');
                wrapper.className = 'fs-progress-bar';
                wrapper.innerHTML = progressHtml;
                Capinfo.parentElement.insertBefore(wrapper, Capinfo);
                const fileList = document.getElementById('fileList');
                fileList.innerHTML = '';

                // Render file rows
                files.forEach(file => {
                    const row = document.createElement('tr');
                    const fileNameCell = document.createElement('td');
                    fileNameCell.textContent = file.name || '';
                    const sizeCell = document.createElement('td');
                    let sizeKb = file.size ? (file.size / 1024).toFixed(2) : '-';
                    sizeCell.textContent = file.size ? `${sizeKb} KB` : '';
                    const actionCell = document.createElement('td');
                    const deleteButton = document.createElement('button');
                    deleteButton.innerHTML = '<svg class="bi" width="24" height="24"><use xlink:href="#trash"></use></svg>';
                    deleteButton.style.backgroundColor = '#f44336';
                    deleteButton.style.color = 'white';
                    deleteButton.onclick = () => deleteFile(file.name);
                    actionCell.appendChild(deleteButton);
                    row.appendChild(fileNameCell);
                    row.appendChild(sizeCell);
                    row.appendChild(actionCell);
                    fileList.appendChild(row);
                });
            })
            .catch(error => console.error('Error fetching file list:', error));
        }

        // Fetch and display SD Card files
        function fetchSDFileList() {
            fetch('/list-sd-files')
            .then(response => response.json())
            .then(data => {
                // Support both {file:[], info:{}} and {files:[], used_kb, free_kb}
                const files = data.files || data.file || [];
                const info = data.info || {};
                const usedKb = info.used_kb ?? data.used_kb ?? 0;
                const freeKb = info.free_kb ?? data.free_kb ?? 0;
                const totalKb = info.total_kb ?? (usedKb + freeKb);
                const percentUsed = totalKb > 0 ? Math.round((usedKb / totalKb) * 100) : 0;

                // Progress Bar
                let progressHtml = `
                    <div style="margin-bottom:10px; padding:6px 20px;">
                    <div style="font-size:14px;">
                        <b>Used:</b> ${usedKb} KB &nbsp; 
                        <b>Free:</b> ${freeKb} KB &nbsp; 
                        <b>Total:</b> ${totalKb} KB
                    </div>
                    <div style="background:#eee; border-radius:6px; height:18px; width:320px; margin-top:6px; box-shadow:0 1px 2px #ccc inset;">
                        <div style="background:#2196F3; height:100%; width:${percentUsed}%; border-radius:6px; transition:width 0.4s;"></div>
                    </div>
                    <div style="font-size:13px; color:#555; margin-top:2px;">${percentUsed}% used</div>
                    </div>
                `;
                // Insert progress bar above file list
                const fileList = document.getElementById('sdFileList');
                fileList.innerHTML = '';
                // Remove any previous progress bar
                const prev = fileList.parentElement.querySelector('.sd-progress-bar');
                if (prev) prev.remove();
                const wrapper = document.createElement('div');
                wrapper.className = 'sd-progress-bar';
                wrapper.innerHTML = progressHtml;
                fileList.parentElement.insertBefore(wrapper, fileList);

                // Render file rows
                files.forEach(file => {
                    const row = document.createElement('tr');
                    const fileNameCell = document.createElement('td');
                    fileNameCell.textContent = file.name || '';
                    const sizeCell = document.createElement('td');
                    let sizeKb = file.size ? (file.size / 1024).toFixed(2) : '-';
                    sizeCell.textContent = file.size ? `${sizeKb} KB` : '';
                    const actionCell = document.createElement('td');
                    const deleteButton = document.createElement('button');
                    deleteButton.innerHTML = '<svg class="bi" width="24" height="24"><use xlink:href="#trash"></use></svg>';
                    deleteButton.style.backgroundColor = '#f44336';
                    deleteButton.style.color = 'white';
                    deleteButton.onclick = () => deleteSDFile(file.name);
                    actionCell.appendChild(deleteButton);
                    row.appendChild(fileNameCell);
                    row.appendChild(sizeCell);
                    row.appendChild(actionCell);
                    fileList.appendChild(row);
                });
            })
            .catch(error => console.error('Error fetching SD file list:', error));
        }

        // Upload file to File System
        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            if (!file) {
                alert('Please select a file to upload.');
                return;
            }
            const formData = new FormData();
            formData.append('file', file);
            showUploadModal();

            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/upload', true);



            xhr.onload = function () {
                hideUploadModal();
                if (xhr.status === 200) {
                    fetchFileList();
                } else {
                    alert('Failed to upload file.');
                }
                setTimeout(() => {
                    if (progressBar) progressBar.remove();
                }, 1000);
            };

            xhr.onerror = function () {
                hideUploadModal();
                alert('Error uploading file.');
                setTimeout(() => {
                    if (progressBar) progressBar.remove();
                }, 1000);
            };

            xhr.send(formData);
        }

        // Upload file to SD Card
        function uploadSDFile() {
            const fileInput = document.getElementById('sdFileInput');
            const file = fileInput.files[0];
            if (!file) {
                alert('Please select a file to upload.');
                return;
            }
            const formData = new FormData();
            formData.append('file', file);

            // Create progress bar
            let progressBar = document.getElementById('uploadSDProgressBar');
            if (!progressBar) {
                progressBar = document.createElement('div');
                progressBar.id = 'uploadSDProgressBar';
                progressBar.style.width = '320px';
                progressBar.style.height = '18px';
                progressBar.style.background = '#eee';
                progressBar.style.borderRadius = '6px';
                progressBar.style.margin = '16px auto';
                progressBar.style.overflow = 'hidden';
                progressBar.innerHTML = `<div id="uploadSDProgressInner" style="height:100%;width:0%;background:#2196F3;border-radius:6px;transition:width 0.2s;"></div>
                    <span id="uploadSDProgressText" style="position:absolute;left:50%;top:0;transform:translateX(-50%);color:#333;font-size:13px;"></span>`;
                progressBar.style.position = 'relative';
                document.body.appendChild(progressBar);
            }
            document.getElementById('uploadSDProgressInner').style.width = '0%';
            document.getElementById('uploadSDProgressText').textContent = '0%';

            showUploadModal();

            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/upload-sd', true);

            xhr.upload.onprogress = function (e) {
                if (e.lengthComputable) {
                    const percent = Math.round((e.loaded / e.total) * 100);
                    document.getElementById('uploadSDProgressInner').style.width = percent + '%';
                    document.getElementById('uploadSDProgressText').textContent = percent + '%';
                }
            };

            xhr.onload = function () {
                hideUploadModal();
                if (xhr.status === 200) {
                    fetchSDFileList();
                } else {
                    alert('Failed to upload file to SD card.');
                }
                setTimeout(() => {
                    if (progressBar) progressBar.remove();
                }, 1000);
            };

            xhr.onerror = function () {
                hideUploadModal();
                alert('Error uploading file to SD card.');
                setTimeout(() => {
                    if (progressBar) progressBar.remove();
                }, 1000);
            };

            xhr.send(formData);
        }

        // Delete file from File System
        function deleteFile(fileName) {
            fetch(`/delete?file=${encodeURIComponent(fileName)}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    alert('File deleted successfully.');
                    fetchFileList();
                } else {
                    alert('Failed to delete file.');
                }
            })
            .catch(error => alert('Error deleting file: ' + error));
        }

        // Delete file from SD Card
        function deleteSDFile(fileName) {
            fetch(`/delete-sd?file=${encodeURIComponent(fileName)}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    alert('File deleted from SD card successfully.');
                    fetchSDFileList();
                } else {
                    alert('Failed to delete file from SD card.');
                }
            })
            .catch(error => alert('Error deleting file from SD card: ' + error));
        }

        // Initial load
        // fetchSDFileList();
        // Show/hide progress bar and update percent
        function showUploadProgress(percent) {
            var bar = document.getElementById('uploadProgressBar');
            var inner = document.getElementById('uploadProgressInner');
            var text = document.getElementById('uploadProgressText');
            if (bar && inner && text) {
                bar.style.display = 'block';
                inner.style.width = percent + '%';
                text.textContent = percent + '%';
            }
        }
        function hideUploadProgress() {
            var bar = document.getElementById('uploadProgressBar');
            if (bar) bar.style.display = 'none';
        }
                        

        function loadDataMapping() {
            fetch('/data-mapping')
                .then(response => response.json())
                .then(data => {
                    const jsonData = JSON.stringify(data, null, 2); // Format JSON with indentation
                    document.getElementById('jsonMappingDatas').value = jsonData;
                    console.log('Loaded data mapping:', data);
                })
                .catch(error => console.error('Error loading data mapping:', error));
        }

        function saveDataMapping() {
            const jsonData = document.getElementById('jsonMappingDatas').value;
            try {
                const parsedData = JSON.parse(jsonData); // Validate JSON format
                fetch('/save-data-mapping', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(parsedData),
                }).then(response => response.json())
                .then(data => {
                    console.log('Response from server:', data);
                    document.getElementById('responseMessageMapping').textContent = 'Data mapping saved successfully!';
                })
                .catch(error => {
                    console.error('Error submitting config:', error);
                    document.getElementById('responseMessageMapping').textContent = 'Error: ' + error.message;
                    document.getElementById('responseMessageMapping').style.color = 'red';
                });
                   
            } catch (error) {
                alert('Invalid JSON format. Please correct it and try again.');
                console.error('JSON Parsing Error:', error);
            }
        }

        function loadNodeDashboard(JsonData) {
            let nodes = [];
            try {
                nodes = JSON.parse(JsonData);
            } catch (error) {
                console.error("Invalid JSON data:", error);
                return;
            }
            try {
                nodes = JSON.parse(JsonData);
            } catch (error) {
                console.error("Invalid JSON data:", error);
                return;
            }
            // Handle Modbus value set confirmation
            if (typeof nodes === 'object' ){
                if ( nodes.setModbusValue === 'ok') {
                    // alert('Set Modbus value: OK');
                    return;
                } else if ( nodes.setModbusValue === 'fail') {
                    // alert('Set Modbus value: Fail');
                    return;
                } else if ( nodes.setModbusValue === 'fail' &&  nodes.error) {
                    // alert('Set Modbus value: Fail | ' + nodes.error);
                    return;
                }
                
            }
            try {
                if (nodes.upload === "progress" && typeof nodes.percent === "number") {
                    showUploadProgress(nodes.percent);
                    // Optionally show modal if not visible
                    var bar = document.getElementById('uploadProgressBar');
                    if (bar && bar.style.display === 'none') {
                        showUploadModal();
                        showUploadProgress(nodes.percent);
                    }
                    // Hide progress if done
                    if (nodes.percent >= 98) {
                        setTimeout(function() {
                            hideUploadModal();
                            hideUploadProgress();
                            fetchFileList();
                        }, 800);
                    }
                    return;
                }
            } catch (e) {}
            if (nodes.masterData) {
                // Only show table for masterData, do not create node cards
                const container = document.getElementById('nodeDataTables');
                container.innerHTML = ''; // Clear previous tables
                const masterData = nodes.masterData;
                // Handle masterData as an array of objects
                if (Array.isArray(masterData)) {
                    let tableHtml = `
                        <h3>Master Data</h3>
                        <table style="width:100%;border-collapse:collapse;">
                            <thead>
                                <tr>
                                    <th>Index</th>
                                    <th>Type</th>
                                    <th>Value</th>
                                    <th>Raw value</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${masterData.map(item => {
                                    // Each item is like {"160":0,"type":"WORD","rawValue":[0,0]}
                                    const key = Object.keys(item).find(k => k !== "rawValue" && k !== "type");
                                    const value = item[key];
                                    const type = item.type || '';
                                    const raw = Array.isArray(item.rawValue) ? item.rawValue.join(', ') : '';
                                    return `
                                        <tr>
                                            <td>${key}</td>
                                            <td>${type}</td>
                                            <td>${value}</td>
                                            <td>${raw}</td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    `;
                    container.innerHTML = tableHtml;
                }


                return;
            }
            const dashboard = document.getElementById('Dashboard');
            const Nodedashboard = document.getElementById('nodeDashboard');

            const status = nodes.status || {};
            const chipTemp = typeof status.chipTemp !== 'undefined' ? status.chipTemp : (nodes.chipTemp ?? '-');
            const freeRam = typeof status.freeRam !== 'undefined' ? status.freeRam : (nodes.freeRam ?? '-');
            const freeSram = typeof status.freeSram !== 'undefined' ? status.freeSram : (nodes.freeSram ?? '-');
            const resetCounter = typeof status.resetCounter !== 'undefined' ? status.resetCounter : (nodes.resetCounter ?? '-');
            const runTime = typeof status.runTime !== 'undefined' ? status.runTime : (nodes.runTime ?? '-');
            const mqttState = status.mqttState || nodes.mqttState || '-';
            const wifiMode = status.wifiMode || nodes.wifiMode || '-';
            const meshState = status.meshEnable !== undefined ? status.meshEnable : (nodes.meshEnable ?? '-');
            const loraState = status.loraEnb !== undefined ? status.loraEnb : (nodes.loraEnb ?? '-');
            const buzzState = status.buzzEnb !== undefined ? status.buzzEnb : (nodes.buzzEnb ?? '-');
            const debugState = status.debug !== undefined ? status.debug : (nodes.debug ?? '-');
            const socketState = socketstate ? "Connected" : "Disconnected";
            // Helper for gauge
            function gaugeHtml(label, value, min, max, unit, color) {
                const percent = (typeof value === 'number' && max > min) ? Math.max(0, Math.min(100, ((value - min) / (max - min)) * 100)) : 0;
                // Lấy mẫu 10 lần để xác định xu hướng (trend arrow)
                window.gaugeSamples = window.gaugeSamples || {};
                window.gaugeSamples[label] = window.gaugeSamples[label] || [];
                window.gaugeSamples[label].push(value);
                if (window.gaugeSamples[label].length > 10) window.gaugeSamples[label].shift();
                let arrow = '';
                let avg = 0;
                if (window.gaugeSamples[label].length === 10) {
                    const first = window.gaugeSamples[label][0];
                    const last = window.gaugeSamples[label][9];
                    const delta = last - first;
                    const threshold = (max - min) * 0.02; // 2% of range
                    if (Math.abs(delta) > threshold) {
                        arrow = avg > first ? '▲' : (avg <= first ? '▼' : '');
                    } else {
                        arrow = '';
                    }
                    // Tính giá trị trung bình
                    avg = window.gaugeSamples[label].reduce((a, b) => a + b, 0) / window.gaugeSamples[label].length;
                }
                return `
                <div style="flex:1; min-width:140px; margin:8px 8px 8px 0; background:#fff; border-radius:8px; box-shadow:0 1px 4px #ccc; padding:16px 12px;">
                    <div style="font-size:15px; color:#555; margin-bottom:8px;">${label}</div>
                    <div style="display:flex; align-items:center;">
                        <div style="font-size:12px;color:#888;">Avg: ${window.gaugeSamples[label].length === 10 ? avg.toFixed(2) : '-'}</div>
                        <div style="width:60px; height:60px; margin-right:12px; position:relative;">
                            <svg width="60" height="60">
                                <circle cx="30" cy="30" r="26" stroke="#eee" stroke-width="6" fill="none"/>
                                <circle cx="30" cy="30" r="26" stroke="${color}" stroke-width="6" fill="none"
                                    stroke-dasharray="${Math.round(percent * 1.63)},163"
                                    stroke-dashoffset="0"
                                    transform="rotate(-90 30 30)"/>
                            </svg>
                            <div style="position:absolute;top:0;left:0;width:60px;height:60px;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:15px;color:${color};">
                                ${typeof value === 'number' ? value : '-'}
                                <span style="font-size:13px; margin-left:4px; color:${arrow === '▲' ? '#4caf50' : (arrow === '▼' ? '#f44336' : '#888')};">
                                    ${arrow}
                                </span>
                            </div>
                        </div>
                        <div style="font-size:13px; color:#888;">${unit}</div>
                    </div>
                </div>`;
            }

            // Helper for state card
            function stateCard(label, value, colorOn, colorOff) {
                let v = value;
                if (typeof v === 'boolean') v = v ? 'Enabled' : 'Disabled';
                if (typeof v === 'number') v = v ? 'Enabled' : 'Disabled';
                if (typeof v === 'string') v = v.charAt(0).toUpperCase() + v.slice(1);
                const isOn = (v === 'Enabled' || v === 'On' || v === 'True' || v === 'STA' || v === 'Broker' || v === 'Yes');
                return `
                <div style="flex:1; min-width:120px; margin:8px 8px 8px 0; background:#fff; border-radius:8px; box-shadow:0 1px 4px #ccc; padding:16px 12px;">
                    <div style="font-size:15px; color:#555; margin-bottom:8px;">${label}</div>
                    <div style="font-size:18px; font-weight:bold; color:${isOn ? colorOn : colorOff};">${v}</div>
                </div>`;
            }

            // Helper for runtime formatting
            function formatRuntime(sec) {
                if (typeof sec !== 'number' || isNaN(sec) || sec < 0) return '-';
                const months = Math.floor(sec / (30*24*3600));
                sec %= 30*24*3600;
                const days = Math.floor(sec / (24*3600));
                sec %= 24*3600;
                const hours = Math.floor(sec / 3600);
                sec %= 3600;
                const minutes = Math.floor(sec / 60);
                sec = Math.floor(sec % 60);
                let str = '';
                if (months) str += `${months}m `;
                if (days) str += `${days}d `;
                str += `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
                return str.trim();
            }

            dashboard.innerHTML = `
            <div style=\"width: 100%; display: flex; justify-content: space-between; align-items: center; background-color: #f4f4f4; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\">
                        <h3 style=\"margin: 0;\">Dashboard</h3>
                        <div style="position: relative;display:flex">
                        <!-- Socket Status Icon -->
                        <span id="socketStatusIcon" style="margin-left:8px; display:inline-flex; align-items:center;">
                            <svg id="socketStatusSvg" width="16" height="16" viewBox="0 0 16 16" style="vertical-align:middle;">
                                <circle cx="8" cy="8" r="7" fill="red" stroke="#888" stroke-width="1"/>
                            </svg>
                        </span>
                    </div> 
            </div>
            `;
            // Status cards row
            dashboard.innerHTML += `
            <div style="display:flex; flex-wrap:wrap; gap:0;">
                <div style="flex:1; min-width:140px; margin:8px 8px 8px 0; background:#fff; border-radius:8px; box-shadow:0 1px 4px #ccc; padding:16px 12px;">
                    <div style="font-size:15px; color:#555; margin-bottom:8px;">Chip Temp</div>
                    <div style="font-size:18px; font-weight:bold; color:${
                        !isNaN(parseFloat(chipTemp))
                            ? (parseFloat(chipTemp) > 75
                                ? '#f44336'
                                : (parseFloat(chipTemp) >= 50
                                    ? '#ff9800'
                                    : (parseFloat(chipTemp) >= 35
                                        ? '#2196F3'
                                        : '#888')))
                            : '#888'
                    };">
                        ${!isNaN(parseFloat(chipTemp)) ? parseFloat(chipTemp).toFixed(2) + ' °C' : '-'}
                    </div>
                </div>
                ${gaugeHtml('Free RAM', typeof freeRam === 'number' ? freeRam : '-', 70, 200, 'KB', '#2196F3')}
                ${gaugeHtml('Free SRAM', typeof freeSram === 'number' ? freeSram : '-', 90, 200, 'KB', '#4caf50')}
                <div style="flex:1; min-width:140px; margin:8px 8px 8px 0; background:#fff; border-radius:8px; box-shadow:0 1px 4px #ccc; padding:16px 12px;">
                    <div style="font-size:15px; color:#555; margin-bottom:8px;">Reset Counter</div>
                    <div style="font-size:18px; font-weight:bold; color:#9c27b0;">${resetCounter}</div>
                    <div style="font-size:15px; color:#555; margin-bottom:8px;">Run Time</div>
                    <div style="font-size:18px; font-weight:bold; color:#009688;">${formatRuntime(runTime)}</div>
                </div>
            </div>
                <div style="flex:1; min-width:180px; margin:8px 8px 8px 0; background:#fff; border-radius:8px; box-shadow:0 1px 4px #ccc; padding:16px 12px;">
                    <div style="font-size:15px; color:#555; margin-bottom:8px;">Network State</div>
                    
                    <div style="font-size:15px; margin-bottom:4px;">
                        <span style="font-weight:bold; color:${socketState === 'Connected' ? '#2196F3' : '#aaa'};">Socket: ${socketState}</span>
                    </div>
                    <div style="font-size:15px; margin-bottom:4px;">
                        <span style="font-weight:bold; color:${mqttState === 'Connected' ? '#2196F3' : '#aaa'};">MQTT: ${mqttState}</span>
                    </div>
                    <div style="font-size:15px; margin-bottom:4px;">
                        <span style="font-weight:bold; color:${wifiMode === 'STA' ? '#009688' : '#aaa'};">WiFi: ${wifiMode}</span>
                    </div>
                    <div style="font-size:15px;">
                        <span style="font-weight:bold; color:${meshState ? '#3f51b5' : '#aaa'};">Mesh: ${meshState ? 'Enabled' : 'Disabled'}</span>
                    </div>
                    <div style="font-size:15px; margin-bottom:4px;">
                        <span style="font-weight:bold; color:${loraState ? '#ff9800' : '#aaa'};">LoRa: ${loraState}</span>
                    </div>
                </div>
                <div style="flex:1; min-width:180px; margin:8px 8px 8px 0; background:#fff; border-radius:8px; box-shadow:0 1px 4px #ccc; padding:16px 12px;">
                    <div style="font-size:15px; color:#555; margin-bottom:8px;">Hardware</div>
                    <div style="font-size:15px; margin-bottom:4px;">
                        <span style="font-weight:bold; color:${buzzState ? '#ff5722' : '#aaa'};">Buzz: ${buzzState}</span>
                    </div>
                    <div style="font-size:15px;">
                        <span style="font-weight:bold; color:${debugState ? '#607d8b' : '#aaa'};">Debug: ${debugState}</span>
                    </div>
                </div>
            </div>


            `;
            dashboard.innerHTML += "\
            <div style=\"width: 100%; display: flex; justify-content: space-between; align-items: center; background-color: #f4f4f4; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\">\
                        <h3 style=\"margin: 0;\">Node Dashboard</h3>\
                        <div style=\"font-size: 14px; color: #555;\">Manage and monitor your nodes</div>\
                    </div>\
                        ";

            nodes.forEach(node => {
                const nodeId = node.nodeId;
                const dataSize = Math.min(node.data.length, 200); // Limit to 200 bytes
                const keyData = node.keys || Array.from({ length: type }, (_, i) => `Key${i + 1}`);
                const typeData = node.type || Array.from({ length: type }, () => '-');
                if (!document.getElementById(`node_${nodeId}_dataTable`)) {
                    createNodeDataTable(nodeId, dataSize, keyData, typeData);
                }

                const formattedData = [];
                let dataIndex = 0;

                node.type.forEach(type => {
                    if (type === "COILS") {
                        formattedData.push(node.data[dataIndex] ? 1 : 0);
                        dataIndex += 1;
                    } else if (type === "WORD") {
                        const word = (node.data[dataIndex] << 8) | node.data[dataIndex + 1];
                        formattedData.push(word);
                        dataIndex += 2;
                    } else if (type === "DWORD") {
                        const dword = (node.data[dataIndex] << 24) | (node.data[dataIndex + 1] << 16) | (node.data[dataIndex + 2] << 8) | node.data[dataIndex + 3];
                        formattedData.push(dword);
                        dataIndex += 4;
                    } else if (type === "FLOAT") {
                        const buffer = new ArrayBuffer(4);
                        const view = new DataView(buffer);
                        view.setUint8(0, node.data[dataIndex]);
                        view.setUint8(1, node.data[dataIndex + 1]);
                        view.setUint8(2, node.data[dataIndex + 2]);
                        view.setUint8(3, node.data[dataIndex + 3]);
                        formattedData.push(view.getFloat32(0));
                        dataIndex += 4;
                    }
                });

                updateNodeData(nodeId, formattedData);

                const card = document.createElement('div');
                card.style.border = '1px solid #ddd';
                card.style.padding = '15px';
                card.style.borderRadius = '8px';
                card.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';
                card.style.width = 'calc(33% - 20px)';
                card.style.boxSizing = 'border-box';

                card.innerHTML = `
                    <h3>Node ${node.nodeId}</h3>
                    <p><strong>MAC:</strong> ${node.mac}</p>
                    <p><strong>Net ID:</strong> ${node.netId}</p>
                    <p><strong>Success Rate:</strong> ${node.successRate}</p>
                    <p><strong>Last Seen:</strong> ${node.timeAgo}</p>
                `;

                dashboard.appendChild(card);
            });
            // });
            // };

        }
        
        function sendEditCommand() {
            const type = document.getElementById('edit_type').value;
            const value = document.getElementById('edit_value').value;
            const address = parseInt(document.getElementById('edit_address').value);
            const cmd = {
                cmnd: "setModbusValue",
                id: 1,
                type: type,
                address: address,
                value: value
            };
            if (window.websocket && window.websocket.readyState === WebSocket.OPEN) {
                window.websocket.send(JSON.stringify(cmd));
                // alert("Sent: " + JSON.stringify(cmd));
                console.log("Sent: " + JSON.stringify(cmd)); 
            } else {
                alert("WebSocket not connected.");
            }
        }
        // Update edit_value min/max based on type
        document.getElementById('edit_type').addEventListener('change', function() {
            const type = this.value;
            const editValue = document.getElementById('edit_value');
            if (type === "0") { // Coil
                editValue.min = 0;
                editValue.max = 1;
                editValue.step = 1;
            } else if (type === "1") { // Word
                editValue.min = 0;
                editValue.max = 65535;
                editValue.step = 1;
            } else if (type === "2") { // DWord
                editValue.min = 0;
                editValue.max = 4294967295;
                editValue.step = 1;
            }
            editValue.value = '';
        });

        // Populate edit_address select with index values from the current table
        function updateEditAddressOptions() {
            const table = document.querySelector('#nodeDataTables table');
            const select = document.getElementById('edit_address');
            select.innerHTML = '';
            if (table) {
                const rows = table.querySelectorAll('tbody tr');
                rows.forEach(row => {
                    const idx = row.children[0].textContent;
                    select.textContent = idx
                });
            }
        }

        function createNodeDataTable(nodeId, dataSize, keyData, typeData) {
            const container = document.getElementById('nodeDataTables');
            const tableDiv = document.createElement('div');
            tableDiv.style.marginBottom = '20px';

            tableDiv.innerHTML = `
                <h3>Node ${nodeId} Data</h3>
                <table id="node_${nodeId}_dataTable" style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>Index</th>
                            <th>Key</th>
                            <th>Type</th>
                            <th>Data</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${Array.from({ length: dataSize }, (_, i) => `
                            <tr>
                                <td>${i}</td>
                                <td>${keyData && keyData[i] ? keyData[i] : '-'}</td>
                                <td>${typeData && typeData[i] ? typeData[i] : '-'}</td>
                                <td id="node_${nodeId}_data_${i}">-</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;

            container.appendChild(tableDiv);
            }

            function updateNodeData(nodeId, data) {
                data.forEach((value, index) => {
                    const cell = document.getElementById(`node_${nodeId}_data_${index}`);
                    if (cell) {
                        cell.textContent = value;
                    }
                });
            }
         // Tab switching logic
        //  function showTab(tabId) {
        //     const tabs = document.querySelectorAll('.tab');
        //     const contents = document.querySelectorAll('.tab-content');

        //     tabs.forEach(tab => tab.classList.remove('active'));
        //     contents.forEach(content => content.classList.remove('active'));

        //     document.querySelector(`#${tabId}`).classList.add('active');
        //     document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
        // }

        function loadWiFiMQTTConfig() {
        fetch('/load-wifi-mqtt-config/')
            .then(response => response.json())
            .then(data => {
                // Populate WiFi Configuration
                document.getElementById('wifiMode').value = data.wifiMode || 'STA';
                document.getElementById('ssid').value = data.ssid || '';
                document.getElementById('password').value = data.password || '';

                // Populate MQTT Configuration
                document.getElementById('mqttHost').value = data.mqttHost || '';
                document.getElementById('mqttPort').value = data.mqttPort || '';
                document.getElementById('mqttUser').value = data.mqttUser || '';
                document.getElementById('mqttPass').value = data.mqttPass || '';
                document.getElementById('conId').value = data.conId || '';
                document.getElementById('topicPush').value = data.topicPush || '';
                document.getElementById('topicSub').value = data.topicSub || '';
                document.getElementById('mqttKeepAlive').value = data.mqttKeepAlive || '';
                document.getElementById('mqttCleanSession').checked = data.mqttCleanSession || false;
                document.getElementById('mqttQos').value = data.mqttQos || '0';
                document.getElementById('mqttRetain').checked = data.mqttRetain || false;
                document.getElementById('mqttLwtTopic').value = data.mqttLwtTopic || '';
                document.getElementById('mqttLwtMessage').value = data.mqttLwtMessage || '';
                document.getElementById('mqttLwtQos').value = data.mqttLwtQos || '0';
                document.getElementById('mqttLwtRetain').checked = data.mqttLwtRetain || false;
                document.getElementById('mqttLwtEnabled').checked = data.mqttLwtEnabled || false;
                document.getElementById('mqttEnable').checked = data.mqttEnable || false; // Set the checkbox state
                document.getElementById('timezone').value = data.timezone || 'UTC+00:00';
            })
            .catch(error => console.error('Error loading WiFi and MQTT config:', error));
        }

        // Submit WiFi and MQTT Configuration
        function submitWiFiMQTTConfig() {
            const wifiConfig = {
                wifiMode: document.getElementById('wifiMode').value,
                ssid: document.getElementById('ssid').value,
                password: document.getElementById('password').value,
            };

            const mqttConfig = {
                mqttHost: document.getElementById('mqttHost').value,
                mqttPort: parseInt(document.getElementById('mqttPort').value),
                mqttUser: document.getElementById('mqttUser').value,
                mqttPass: document.getElementById('mqttPass').value,
                conId: document.getElementById('conId').value,
                topicPush: document.getElementById('topicPush').value,
                topicSub: document.getElementById('topicSub').value,
                mqttKeepAlive: parseInt(document.getElementById('mqttKeepAlive').value),
                mqttCleanSession: document.getElementById('mqttCleanSession').checked,
                mqttQos: parseInt(document.getElementById('mqttQos').value),
                mqttRetain: document.getElementById('mqttRetain').checked,
                mqttLwtTopic: document.getElementById('mqttLwtTopic').value,
                mqttLwtMessage: document.getElementById('mqttLwtMessage').value,
                mqttLwtQos: parseInt(document.getElementById('mqttLwtQos').value),
                mqttLwtRetain: document.getElementById('mqttLwtRetain').checked,
                mqttLwtEnabled: document.getElementById('mqttLwtEnabled').checked,
                mqttEnable: document.getElementById('mqttEnable').checked, // Get the checkbox state
                timezone: document.getElementById('timezone').value
            };

            const combinedConfig = { ...wifiConfig, ...mqttConfig };

            console.log('Submitting combined config:', combinedConfig);

            fetch('/save-wifi-mqtt-config/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(combinedConfig),
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Response from server:', data);
                    document.getElementById("responseMessageWifi").textContent = 'Configuration saved successfully!';
                    document.getElementById("responseMessageWifi").style.color = 'green';
                    alert(data.status || 'Configuration saved successfully!');

                })
                .catch(error => {console.error('Error submitting WiFi and MQTT config:', error);
                    document.getElementById("responseMessageWifi").textContent = 'Error: ' + error.message;
                    document.getElementById("responseMessageWifi").style.color = 'red';
                });
        }
        // Function to update form values from ESP data
        function updateFormFromESP(data) {
            // Cập nhật các trường đơn lẻ
            document.getElementById('role').value = data.role || 'master';
            document.getElementById('com').value = data.Com || 'TCP/IP';
            document.getElementById('id').value = data.id || '';
            document.getElementById('slaveip').value = data.slaveip ? data.slaveip.join(',') : '';

            // Cập nhật bảng tagsTable
            const tableBody = document.getElementById('tagsTable').getElementsByTagName('tbody')[0];
            tableBody.innerHTML = ''; // Xóa tất cả các hàng hiện tại

            if (data.Tag && data.Value && data.Type) {
                for (let i = 0; i < data.Tag.length; i++) {
                    const newRow = tableBody.insertRow();
                    newRow.innerHTML = `
                        <td><input type="number" name="tags[]" value="${data.Tag[i]}" required></td>
                        <td><input type="number" name="Offset[]" value="${data.Offset[i]}" required></td>
                        <td><input type="number" name="values[]" value="${data.Value[i]}" required></td>
                        <td><input type="number" name="types[]" value="${data.Type[i]}" required></td>
                        <td><button type="button" onclick="deleteRow(this)">Delete</button></td>
                    `;
                }
            }
        }

        function loadEthernetConfig() {
            fetch('/load-ethernet-config')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('ethDhcp').checked = data.dhcp || false;
                    document.getElementById('ethIp').value = data.ip || '';
                    document.getElementById('ethSubnet').value = data.subnet || '';
                    document.getElementById('ethGateway').value = data.gateway || '';
                    document.getElementById('ethDns').value = data.dns || '';
                })
                .catch(error => console.error('Error loading Ethernet config:', error));
        }
        function saveEthernetConfig() {
            const config = {
                dhcp: document.getElementById('ethDhcp').checked,
                ip: document.getElementById('ethIp').value,
                subnet: document.getElementById('ethSubnet').value,
                gateway: document.getElementById('ethGateway').value,
                dns: document.getElementById('ethDns').value
            };
            fetch('/save-ethernet-config', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(config)
            })
            .then(response => response.json())
            .then(data =>{ alert(data.status || 'Ethernet config saved!');
                console.log('Ethernet config saved:', data);
                document.getElementById("responseMessageEther").textContent = 'Ethernet configuration saved successfully!';
                document.getElementById("responseMessageEther").style.color = 'green';
            })
            .catch(error => {alert('Save failed: ' + error);
                console.error('Error saving Ethernet config:', error);
                document.getElementById("responseMessageEther").textContent = 'Error: ' + error.message;
                document.getElementById("responseMessageEther").style.color = 'red';
            });
        }
        window.addEventListener('DOMContentLoaded', loadEthernetConfig);
        
        function resetEsp() {
            document.getElementById('resetEspResponse').textContent = 'Resetting...';
            fetch('/reset-esp', { method: 'POST' })
                .then(res => res.json())
                .then(data => {
                    document.getElementById('resetEspResponse').textContent = data.status || 'Reset command sent!';
                })
                .catch(err => {
                    document.getElementById('resetEspResponse').textContent = 'Reset failed: ' + err;
                });
        }

        function submitMeshConfig() {
            const form = document.getElementById('meshConfigForm');
            const meshConfig = {
                meshEnable: form.MeshEnable.checked, // Get the checkbox state
                BrokerAddress: form.brokerAddress.value, // Save MAC address as a string
                wifiChannel: parseInt(form.wifiChannel.value),
                id: parseInt(form.nodeId.value),
                netId: parseInt(form.netId.value),
                role: form.meshrole.value,
                debug: form.debug.checked,
                macSlaves: form.macSlaves.value.split(',').map(mac => mac.trim()), // Split and trim MAC addresses
                dataVersion: parseInt(form.dataVersion.value),
                boardModel: form.boardModel.value,
                classDataRequest: form.classDataRequest.value,
                communicationTime: parseInt(form.communicationTime.value) || 0, // Default to 0 if not provided
                loraEnb: form.loraEnb.checked,
                buzzEnb: form.buzzEnb.checked
            };
            // if(boardModel == 0){document.getElementById("pinMappingCard").style.display = block;}else{
            //     document.getElementById("pinMappingCard").style.display = none;
            // }
            document.getElementById("pinMappingCard").style.display = 'block';
            console.log('Submitting Mesh config:', meshConfig);

            fetch('/save-mesh-config', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(meshConfig)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Response from server:', data);
                alert(data.status || 'Mesh configuration saved successfully!');
            })
            .catch(error => console.error('Error submitting Mesh config:', error));
        }

        // Function to load Mesh Configuration
        function loadMeshConfig() {
            fetch('/load-mesh-config')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('brokerAddress').value = data.BrokerAddress;
                    document.getElementById('wifiChannel').value = data.wifiChannel || '';
                    document.getElementById('nodeId').value = data.id || '';
                    document.getElementById('netId').value = data.netId || '';
                    document.getElementById('meshrole').value = data.role || 'Node';
                    document.getElementById('debug').checked = data.debug || false;
                    document.getElementById('macSlaves').value = data.macSlaves ? data.macSlaves.join(',') : '';
                    document.getElementById('dataVersion').value = data.dataVersion || 0;
                    document.getElementById('boardModel').value = data.boardModel || ''; 
                    document.getElementById('classDataRequest').value = data.classDataRequest || 'A';
                    document.getElementById('communicationTime').value = data.communicationTime || 0; // Default to 0 if not provided
                    document.getElementById('loraEnb').checked = data.loraEnb || false;
                    document.getElementById('buzzEnb').checked = data.buzzEnb || false;
                    document.getElementById('MeshEnable').checked = data.meshEnable || false; // Set the checkbox state
                })
                .catch(error => console.error('Error loading Mesh config:', error));
        }
        




        // Submit Modbus Configuration
        function submitConfig() {
            const form = document.getElementById('modbusConfigForm');
            const role = form.role.value;
            const com = form.com.value;
            const id = parseInt(form.id.value);
            const slaveip = form.slaveip.value.split(',').map(Number);
            const tags = Array.from(document.querySelectorAll('input[name="tags[]"]')).map(input => parseInt(input.value)); // Chuyển đổi Tag thành số
            const offsets = Array.from(document.querySelectorAll('input[name="Offset[]"]')).map(input => parseInt(input.value)); // Chuyển đổi Value thành số
            const values = Array.from(document.querySelectorAll('input[name="values[]"]')).map(input => parseInt(input.value)); // Chuyển đổi Value thành số
            const types = Array.from(document.querySelectorAll('input[name="types[]"]')).map(input => parseInt(input.value)); // Chuyển đổi Type thành số

            const config = {
                role: role,
                Com: com,
                id: id,
                slaveip: slaveip,
                Tag: tags,
                Offset: offsets,
                Value: values,
                Type: types
            };

            console.log('Submitting config:', config);

            fetch('/modbus-config', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(config) // Chuyển đổi đối tượng thành chuỗi JSON
            })
            .then(response => response.json())
            .then(data => {
                console.log('Response from server:', data);
                document.getElementById('responseMessage').textContent = data.status || 'Configuration saved successfully!';
            })
            .catch(error => {
                console.error('Error submitting config:', error);
                document.getElementById('responseMessage').textContent = 'Error: ' + error.message;
                document.getElementById('responseMessage').style.color = 'red';
            });
        }

        

        // Update styles for Upload and Submit buttons
        var uploadBtn = document.querySelector('button[onclick="uploadFile()"]');
        if (uploadBtn) {
            uploadBtn.innerHTML = '<i><use xlink:href="#upload_icon"></use></svg></i> Upload';
            uploadBtn.style.backgroundColor = '#2196F3';
            uploadBtn.style.color = 'white';
        }

        var submitBtn = document.querySelector('button[onclick="submitConfig()"]');
        if (submitBtn) {
            submitBtn.innerHTML = '<i><use xlink:href="#download_icon"></use></svg></i> Submit';
            submitBtn.style.backgroundColor = '#2196F3';
            submitBtn.style.color = 'white';
        }

        // Upload a file
        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            if (!file) {
                alert('Please select a file to upload.');
                return;
            }

            const formData = new FormData();
            formData.append('file', file);

            fetch('/upload', {
                method: 'POST',
                body: formData
            })
                .then(response => {
                    if (response.ok) {
                        // alert('File uploaded successfully.');
                            // hideUploadModal();
                        fetchFileList();
                    } else {
                            hideUploadModal();
                        alert('Failed to upload file.');
                    }
                })
                .catch(error => console.error('Error uploading file:', error));
        }

        // Delete a file
        function deleteFile(fileName) {
            fetch(`/delete?file=${encodeURIComponent(fileName)}`, {
                method: 'DELETE'
            })
                .then(response => {
                    if (response.ok) {
                        alert('File deleted successfully.');
                        fetchFileList();
                    } else {
                        alert('Failed to delete file.');
                    }
                })
                .catch(error => console.error('Error deleting file:', error));
        }

         // Load LoRa RY Configuration
        function loadLoRaRYConfig() {
            fetch('/load-lora-config')
                .then(response => response.json())
                .then(data => {
                //     document.getElementById('ryMode').value = data.mode || '0';
                //     document.getElementById('ryRxTime').value = data.rxTime || '';
                //     document.getElementById('ryLowSpeedTime').value = data.lowSpeedTime || '';
                //     document.getElementById('ryBand').value = data.band || '';
                //     document.getElementById('ryPower').value = data.power || '';
                //     document.getElementById('ryAddress').value = data.address || '';
                //     document.getElementById('ryNetworkId').value = data.networkId || '';
                    // document.getElementById('LoRaEnable').checked = data.LoRaEnable || false;
                })
                .catch(error => console.error('Error loading LoRa RY config:', error));
        }

        // Submit LoRa RY Configuration
        function submitLoRaRYConfig() {
            const form = document.getElementById('loraRYConfigForm');
            const loraRYConfig = {
                LoRaEnable: document.getElementById('LoRaEnable').checked,
                mode: parseInt(form.ryMode.value),
                rxTime: parseInt(form.ryRxTime.value),
                lowSpeedTime: parseInt(form.ryLowSpeedTime.value),
                band: parseInt(form.ryBand.value),
                power: parseInt(form.ryPower.value),
                address: parseInt(form.ryAddress.value),
                networkId: parseInt(form.ryNetworkId.value)
            };

            console.log('Submitting LoRa RY config:', loraRYConfig);

            fetch('/configure-lora', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(loraRYConfig)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Response from server:', data);
                alert(data.status || 'LoRa RY configuration saved successfully!');
            })
            .catch(error => console.error('Error submitting LoRa RY config:', error));
        }
        
        function submitLoRaConfig() {
            const form = document.getElementById('loraConfigForm');
            const loraConfig = {
                address: parseInt(form.address.value),
                uart_speed: form.uartSpeed.value,
                air_data_rate: form.airRate.value,
                channel: parseInt(form.channel.value),
                transmission_mode: form.transmissionMode.value,
                pull_up: form.pullUp.checked,
                fec: form.fec.checked,
                power: parseInt(form.power.value)
            };

            console.log('Submitting LoRa E32 config:', loraConfig);

            fetch('/configure-e32', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(loraConfig)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Response from server:', data);
                alert(data.status || 'LoRa E32 configuration saved successfully!');
            })
            .catch(error => console.error('Error submitting LoRa E32 config:', error));
        }
        // Dropdown logic
        document.addEventListener('DOMContentLoaded', function() {
            const btn = document.getElementById('userDropdownBtn');
            const menu = document.getElementById('userDropdownMenu');
            btn.onclick = function(e) {
                e.stopPropagation();
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            };
            document.body.addEventListener('click', function() {
                menu.style.display = 'none';
            });
        });

        // Modal logic
        function showChangePasswordModal() {
            document.getElementById('changePasswordModal').style.display = 'flex';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            document.getElementById('changePasswordError').textContent = '';
            document.getElementById('userDropdownMenu').style.display = 'none';
            // Focus on the new password field
            document.getElementById('newPassword').focus();
            // Add keydown event listeners for Enter key
            document.getElementById('newPassword').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    submitChangePassword();
                }
            });

            document.getElementById('confirmPassword').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    submitChangePassword();
                }
            });
        }

        function closeChangePasswordModal() {
            document.getElementById('changePasswordModal').style.display = 'none';
        }

        function submitChangePassword() {
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;
            const err = document.getElementById('changePasswordError');
            if (!newPass || !confirmPass) {
                err.textContent = 'Please enter both fields.';
                return;
            }
            if (newPass !== confirmPass) {
                err.textContent = 'Passwords do not match.';
                return;
            }
            if (window.websocket && window.websocket.readyState === WebSocket.OPEN) {
                window.websocket.send(JSON.stringify({ cmnd: "changePassword", data: newPass }));
                closeChangePasswordModal();
                alert('Password change command sent.');
            } else {
                err.textContent = 'WebSocket not connected.';
            }
        }
        
        function logoutUser() {
            if (window.websocket && window.websocket.readyState === WebSocket.OPEN) {
                window.websocket.send(JSON.stringify({ cmnd: "logout" }));
            }
            // Optionally redirect or reload
            setTimeout(function() { window.location.reload(); }, 500);
        }
    </script>
</body>
</html>